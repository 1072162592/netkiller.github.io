<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 6 章 Switch</title><link rel="stylesheet" type="text/css" href="/docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><meta name="keywords" content="pix,asa,3750,4507,5550, vlan,vtp, hsrp,vrrp, rip,ospf" /><link rel="home" href="index.html" title="Netkiller Cisco IOS 手札" /><link rel="up" href="cisco.html" title="部分 I. Cisco IOS" /><link rel="prev" href="route.reload.html" title="13. reload" /><link rel="next" href="switch.interface.html" title="2. interface" /><script xmlns="" type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11694057-1']);
  _gaq.push(['_setDomainName', 'netkiller.sourceforge.net']);
  _gaq.push(['_setAllowHash', 'false']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 6 章 Switch</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="route.reload.html">上一頁</a> </td><th width="60%" align="center">部分 I. Cisco IOS</th><td width="20%" align="right"> <a accesskey="n" href="switch.interface.html">下一頁</a></td></tr></table><hr /></div><table xmlns="" width="100%" border="0"><tr><td align="left"><a href="http://netkiller.sourceforge.net/">Home</a> |
                <a href="http://netkiller.github.com/">Mirror</a> |
                <a href="/search.html">Search</a></td><td align="right"><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table><div class="chapter" title="第 6 章 Switch"><div class="titlepage"><div><div><h2 class="title"><a id="switch"></a>第 6 章 Switch</h2></div></div></div><div class="toc"><p><strong>目錄</strong></p><dl><dt><span class="section"><a href="switch.html#switch.started">1. 交換機初始化</a></span></dt><dd><dl><dt><span class="section"><a href="switch.html#idp308448">1.1. 密碼設置</a></span></dt><dt><span class="section"><a href="switch.html#idp310272">1.2. 域名，網管</a></span></dt><dt><span class="section"><a href="switch.html#switch.telnet">1.3. Telnet</a></span></dt><dd><dl><dt><span class="section"><a href="switch.html#idp313392">1.3.1. privilege level</a></span></dt></dl></dd><dt><span class="section"><a href="switch.html#idp314544">1.4. 保存當前配置</a></span></dt><dt><span class="section"><a href="switch.html#idp315808">1.5. 恢復交換機出廠值</a></span></dt></dl></dd><dt><span class="section"><a href="switch.interface.html">2. interface</a></span></dt><dd><dl><dt><span class="section"><a href="switch.interface.html#idp317440">2.1. show interfaces status</a></span></dt><dt><span class="section"><a href="switch.interface.html#idp318496">2.2. ip address</a></span></dt><dt><span class="section"><a href="switch.interface.html#idp320640">2.3. 配置連接埠速率及雙工模式</a></span></dt><dt><span class="section"><a href="switch.interface.html#idp323200">2.4. range</a></span></dt><dt><span class="section"><a href="switch.interface.html#idp326768">2.5. 連接埠隔離</a></span></dt></dl></dd><dt><span class="section"><a href="switch.dhcp.html">3. DHCP</a></span></dt><dd><dl><dt><span class="section"><a href="switch.dhcp.html#switch.gateway">3.1. Gateway</a></span></dt><dt><span class="section"><a href="switch.dhcp.html#switch.dhcp.snooping">3.2. snooping</a></span></dt><dt><span class="section"><a href="switch.dhcp.html#idp337696">3.3. DHCP中繼代理</a></span></dt></dl></dd><dt><span class="section"><a href="switch.switchport.html">4. Route port</a></span></dt><dt><span class="section"><a href="switch.monitor.html">5. 交換機連接埠鏡像配置</a></span></dt><dt><span class="section"><a href="switch.channel-group.html">6. Ethernet Port Groups</a></span></dt><dd><dl><dt><span class="section"><a href="switch.channel-group.html#idp346544">6.1. LACP</a></span></dt><dt><span class="section"><a href="switch.channel-group.html#idp348320">6.2. desirable</a></span></dt></dl></dd><dt><span class="section"><a href="switch.vlan.html">7. VLAN</a></span></dt><dd><dl><dt><span class="section"><a href="switch.vlan.html#idp352192">7.1. vlan database</a></span></dt><dt><span class="section"><a href="switch.vlan.html#idp354928">7.2. 兩層Switch配置講解</a></span></dt><dt><span class="section"><a href="switch.vlan.html#idp359344">7.3. 3 Layer Switch</a></span></dt><dt><span class="section"><a href="switch.vlan.html#switch.vtp">7.4. VTP</a></span></dt><dd><dl><dt><span class="section"><a href="switch.vlan.html#idp376240">7.4.1. Configuring a VTP Server</a></span></dt><dt><span class="section"><a href="switch.vlan.html#idp378368">7.4.2. Configuring a VTP Client</a></span></dt><dt><span class="section"><a href="switch.vlan.html#idp379568">7.4.3. example for vtp</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="switch.acl.html">8. ACL</a></span></dt><dt><span class="section"><a href="switch.speed.html">9. 流量控制</a></span></dt><dd><dl><dt><span class="section"><a href="switch.speed.html#idp387632">9.1. 粗糙的流量限制</a></span></dt><dt><span class="section"><a href="switch.speed.html#idp388816">9.2. bandwidth</a></span></dt><dt><span class="section"><a href="switch.speed.html#idp389904">9.3. priority</a></span></dt></dl></dd><dt><span class="section"><a href="stack-manager.html">10. stack-manager</a></span></dt><dt><span class="section"><a href="switch.hsrp.html">11. HSRP(Hot Standby Router Protocol)</a></span></dt><dt><span class="section"><a href="cdp.html">12. CDP (Cisco Discovery Protocol)</a></span></dt><dd><dl><dt><span class="section"><a href="cdp.html#idp406688">12.1. clear cdp counters</a></span></dt><dt><span class="section"><a href="cdp.html#idp407840">12.2. show cdp</a></span></dt><dt><span class="section"><a href="cdp.html#idp408992">12.3. show cdp entry</a></span></dt><dt><span class="section"><a href="cdp.html#idp411328">12.4. show cdp interface</a></span></dt><dt><span class="section"><a href="cdp.html#idp413792">12.5. show cdp neighbors</a></span></dt></dl></dd><dt><span class="section"><a href="switch.4507.html">13. 4506/4507 專有命令</a></span></dt><dd><dl><dt><span class="section"><a href="switch.4507.html#switch.auth">13.1. 用戶認證</a></span></dt><dt><span class="section"><a href="switch.4507.html#switch.poe">13.2. PoE</a></span></dt><dt><span class="section"><a href="switch.4507.html#switch.module">13.3. show module</a></span></dt></dl></dd></dl></div><p>Cisco 固定配置交換機命名規則</p><pre class="screen">
對於Cisco的固定配置的交換機，一般有3750，3550，3560，2960，2970這幾個系列。

它們在型號命令上有自己相應的規則，特總結如下：

eg: WS-C3750G-48TS-S

C3750表明這款產品屬於3750這個系列，也就是產品的型號。

G----表明其所有介面都是支持千兆或以上，如果沒有這個就表明其主要連接埠都是10/100M的或者100M的

48----表明其擁有主要的連接埠數量為48個

T----表明其主要連接埠是電口（也就是所謂的Twirst Pair的連接埠

P----表明其主要連接埠是電口，同時支持PoE乙太網供電

S----表明其帶的擴展的介面為SFP類型的介面

最後部分的-S表明交換機帶的軟件是SMI標準影像的,-E表明是EMI影像的
	</pre><div class="section" title="1. 交換機初始化"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="switch.started"></a>1. 交換機初始化</h2></div></div></div><p>Cisco Catalyst 2960 Series Switches</p><pre class="screen">
		
Press RETURN to get started!


*Mar  1 00:00:25.073: %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan1, cha                                                                                                 nged state to down
*Mar  1 00:00:26.189: %SPANTREE-5-EXTENDED_SYSID: Extended SysId enabled for typ                                                                                                 e vlan
*Mar  1 00:00:47.102: %SYS-5-RESTART: System restarted --
Cisco IOS Software, C2960 Software (C2960-LANBASEK9-M), Version 12.2(44)SE6, REL                                                                                                 EASE SOFTWARE (fc1)
Copyright (c) 1986-2009 by Cisco Systems, Inc.
Compiled Mon 09-Mar-09 18:10 by gereddy


         --- System Configuration Dialog ---

Would you like to enter the initial configuration dialog? [yes/no]:
Would you like to enter the initial configuration dialog? [yes/no]: yes

At any point you may enter a question mark '?' for help.
Use ctrl-c to abort configuration dialog at any prompt.
Default settings are in square brackets '[]'.


Basic management setup configures only enough connectivity
for management of the system, extended setup will ask you
to configure each interface on the system

Would you like to enter basic management setup? [yes/no]: yes
Configuring global parameters:

  Enter host name [Switch]:

  The enable secret is a password used to protect access to
  privileged EXEC and configuration modes. This password, after
  entered, becomes encrypted in the configuration.
  Enter enable secret: chen

  The enable password is used when you do not specify an
  enable secret password, with some older software versions, and
  some boot images.
  Enter enable password: chen
% Please choose a password that is different from the enable secret
  Enter enable password: chen

  The virtual terminal password is used to protect
  access to the router over a network interface.
  Enter virtual terminal password: chen
  Configure SNMP Network Management? [no]: yes
    Community string [public]:

Current interface summary

Interface              IP-Address      OK? Method Status                Protocol
Vlan1                  unassigned      YES unset  up                    down
FastEthernet0/1        unassigned      YES unset  down                  down
FastEthernet0/2        unassigned      YES unset  down                  down
FastEthernet0/3        unassigned      YES unset  down                  down
FastEthernet0/4        unassigned      YES unset  down                  down
FastEthernet0/5        unassigned      YES unset  down                  down
FastEthernet0/6        unassigned      YES unset  down                  down
FastEthernet0/7        unassigned      YES unset  down                  down
FastEthernet0/8        unassigned      YES unset  down                  down
FastEthernet0/9        unassigned      YES unset  down                  down
FastEthernet0/10       unassigned      YES unset  down                  down
FastEthernet0/11       unassigned      YES unset  down                  down
FastEthernet0/12       unassigned      YES unset  down                  down
FastEthernet0/13       unassigned      YES unset  down                  down
FastEthernet0/14       unassigned      YES unset  down                  down
FastEthernet0/15       unassigned      YES unset  down                  down
FastEthernet0/16       unassigned      YES unset  down                  down
FastEthernet0/17       unassigned      YES unset  down                  down
FastEthernet0/18       unassigned      YES unset  down                  down
FastEthernet0/19       unassigned      YES unset  down                  down
FastEthernet0/20       unassigned      YES unset  down                  down
FastEthernet0/21       unassigned      YES unset  down                  down
FastEthernet0/22       unassigned      YES unset  down                  down
FastEthernet0/23       unassigned      YES unset  down                  down
FastEthernet0/24       unassigned      YES unset  down                  down
GigabitEthernet0/1     unassigned      YES unset  down                  down
GigabitEthernet0/2     unassigned      YES unset  down                  down

Enter interface name used to connect to the
management network from the above interface summary: FastEthernet0/24

Configuring interface FastEthernet0/24:
  Configure IP on this interface? [no]: yes
    IP address for this interface: 172.16.0.253
    Subnet mask for this interface [255.255.0.0] :
    Class B network is 172.16.0.0, 16 subnet bits; mask is /16
Would you like to enable as a cluster command switch? [yes/no]: yes
Enter cluster name: cl1

The following configuration command script was created:

hostname Switch
enable secret 5 $1$W1RW$ZdWR.sS/g2RwJMv4F5sRq0
enable password chen
line vty 0 15
password chen
snmp-server community public
!
!
interface Vlan1
shutdown
no ip address
!
interface FastEthernet0/1
!
interface FastEthernet0/2
!
interface FastEthernet0/3
!
interface FastEthernet0/4
!
 --More--

		
		</pre><div class="section" title="1.1. 密碼設置"><div class="titlepage"><div><div><h3 class="title"><a id="idp308448"></a>1.1. 密碼設置</h3></div></div></div><p>基本操作</p><pre class="screen">
Switch command
Switch &gt; en 進入特權模式
Switch # conf t 進入全局配置模式
Switch（config）# interface interface-num 進入介面
Switch（config）# hostname name 給交換機命名
Switch（config）# enable password password 設置明文密碼
Switch（config）# enable secret password 設置加密的啟用秘密口令。如果設置則取代明文口令
Switch # copy running-config startup-config
Switch # write 保存設置
			</pre></div><div class="section" title="1.2. 域名，網管"><div class="titlepage"><div><div><h3 class="title"><a id="idp310272"></a>1.2. 域名，網管</h3></div></div></div><p>初始化設置</p><pre class="screen">
Switch setup
switch（config）# ip default-gateway ip-address
switch（config）# ip domain-name domain-name
switch（config）# ip name-server IP-address 交換機上設置遠程訪問,用於交換機管理
			</pre></div><div class="section" title="1.3. Telnet"><div class="titlepage"><div><div><h3 class="title"><a id="switch.telnet"></a>1.3. Telnet</h3></div></div></div><p>通過Telnet進入命令行介面</p><pre class="screen">
Switch&gt;enable
Switch#conf t
Switch(config)#line vty 0 4
Switch(config－line)#login
Switch(config－line)#password cisco
			</pre><div class="section" title="1.3.1. privilege level"><div class="titlepage"><div><div><h4 class="title"><a id="idp313392"></a>1.3.1. privilege level</h4></div></div></div><pre class="screen">
line vty 5 15
 privilege level 15
 password neo
 login
!
				</pre></div></div><div class="section" title="1.4. 保存當前配置"><div class="titlepage"><div><div><h3 class="title"><a id="idp314544"></a>1.4. 保存當前配置</h3></div></div></div><p>Save</p><pre class="screen">
Switch#wr
Building configuration...
[OK]
			</pre></div><div class="section" title="1.5. 恢復交換機出廠值"><div class="titlepage"><div><div><h3 class="title"><a id="idp315808"></a>1.5. 恢復交換機出廠值</h3></div></div></div><pre class="screen">
Switch# erase startup-config
			</pre></div></div></div><div xmlns="" id="disqus_thread"></div><script xmlns="" type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

            if(document.domain == 'netkiller.github.com'){
            var disqus_shortname = 'netkiller'; // required: replace example with your forum shortname
            }else{
			var disqus_shortname = 'neochan';
            }

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript xmlns="">Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a xmlns="" href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="route.reload.html">上一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="cisco.html">上一級</a></td><td width="40%" align="right"> <a accesskey="n" href="switch.interface.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">13. reload </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 2. interface</td></tr></table></div></body></html>
