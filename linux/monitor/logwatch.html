<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2. logwatch</title><link rel="stylesheet" href="/docbook.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="../index.html" title="Netkiller Linux 手札" /><link rel="up" href="os.monitor.html" title="第 64 章 OS Monitoring" /><link rel="prev" href="os.monitor.html" title="第 64 章 OS Monitoring" /><link rel="next" href="nmon.html" title="3. nmon" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. logwatch</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="os.monitor.html">上一页</a> </td><th width="60%" align="center">第 64 章 OS Monitoring</th><td width="20%" align="right"> <a accesskey="n" href="nmon.html">下一页</a></td></tr></table><hr /></div><div class="section" title="2. logwatch"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="logwatch"></a>2. logwatch</h2></div><div><h3 class="subtitle">logwatch - log analyser with nice output written in Perl</h3></div></div></div><p><a class="ulink" href="http://www.logwatch.org/" target="_top">http://www.logwatch.org/</a></p><div class="procedure" title="过程 64.2. logwatch 安装步骤:"><a id="id1390855"></a><p class="title"><b>过程 64.2. logwatch 安装步骤:</b></p><ol class="procedure" type="1"><li class="step" title="步骤 1"><p>Install</p><p>Ubuntu 7.10</p><pre class="screen">
netkiller@shenzhen:/etc/webmin$ apt-cache search logwatch
fwlogwatch - Firewall log analyzer
logwatch - log analyser with nice output written in Perl
				</pre><p>apt-get install</p><pre class="screen">
# apt-get install logwatch
				</pre><p>the logwatch has been installed, it should create a file in '/etc/cron.daily/00logwatch'.</p></li><li class="step" title="步骤 2"><p>config</p><pre class="screen">
$ sudo cp /usr/share/logwatch/default.conf/logwatch.conf  /etc/logwatch/conf/logwatch.conf
$ sudo mkdir /var/cache/logwatch
$ sudo vim /etc/logwatch/conf/logwatch.conf
				</pre><p>mail to</p><pre class="screen">
# Default person to mail reports to.  Can be a local account or a
# complete email address.
MailTo = root, openunix@163.com, other@example.com
				</pre><p>To change detail level for the report</p><pre class="screen">
# The default detail level for the report.
# This can either be Low, Med, High or a number.
# Low = 0
# Med = 5
# High = 10
Detail = High
				</pre><p>Crontab</p><pre class="screen">
netkiller@shenzhen:~$ cat /etc/cron.daily/00logwatch
#!/bin/bash

#Check if removed-but-not-purged
test -x /usr/share/logwatch/scripts/logwatch.pl || exit 0

#execute
/usr/sbin/logwatch
				</pre></li><li class="step" title="步骤 3"><p>The logwatch is command, you can run it.</p><div class="literallayout"><p><br />
				 logwatch --print <br />
				</p></div><p>单独查看某个服务，比如 SSH 登录信息</p><p>logwatch --service sshd --print</p></li></ol></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="os.monitor.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="os.monitor.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="nmon.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 64 章 OS Monitoring </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 3. nmon</td></tr></table></div></body></html>
