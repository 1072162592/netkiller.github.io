<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 60 章 Network</title><link rel="stylesheet" href="/docbook.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="../index.html" title="Netkiller Linux 手札" /><link rel="up" href="index.html" title="部分 V. Monitoring" /><link rel="prev" href="ch59s05.html" title="5. Unicornscan，Zenmap，nast" /><link rel="next" href="nagios.html" title="2. Nagios" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 60 章 Network</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch59s05.html">上一页</a> </td><th width="60%" align="center">部分 V. Monitoring</th><td width="20%" align="right"> <a accesskey="n" href="nagios.html">下一页</a></td></tr></table><hr /><table width="100%" border="0"><tr><td align="left"><a href="http://netkiller.sourceforge.net/">Home</a> | 
		<a href="http://netkiller.github.com/">Mirror</a> |		
		<a href="/search.html">Search</a></td><td align="right"><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table></div><div class="chapter" title="第 60 章 Network"><div class="titlepage"><div><div><h2 class="title"><a id="network.monitor"></a>第 60 章 Network</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl><dt><span class="section"><a href="network.monitor.html#cacti">1. Cacti</a></span></dt><dd><dl><dt><span class="section"><a href="network.monitor.html#id1427032">1.1. Template</a></span></dt></dl></dd><dt><span class="section"><a href="nagios.html">2. Nagios</a></span></dt><dd><dl><dt><span class="section"><a href="nagios.html#id1427083">2.1. Install Nagios</a></span></dt><dt><span class="section"><a href="nagios.html#id1427084">2.2. 配置 Nagios</a></span></dt><dd><dl><dt><span class="section"><a href="nagios.html#id1427140">2.2.1. authorized</a></span></dt><dt><span class="section"><a href="nagios.html#id1427159">2.2.2. contacts</a></span></dt><dt><span class="section"><a href="nagios.html#id1427194">2.2.3. hostgroups</a></span></dt><dt><span class="section"><a href="nagios.html#id1427204">2.2.4. generic-service</a></span></dt><dt><span class="section"><a href="nagios.html#id1427241">2.2.5. SOUND OPTIONS</a></span></dt><dt><span class="section"><a href="nagios.html#id1427259">2.2.6. SMS 短信</a></span></dt></dl></dd><dt><span class="section"><a href="nagios.html#id1427282">2.3. 配置监控设备</a></span></dt><dd><dl><dt><span class="section"><a href="nagios.html#id1427285">2.3.1. routers</a></span></dt><dt><span class="section"><a href="nagios.html#id1427305">2.3.2. hosts / service</a></span></dt><dd><dl><dt><span class="section"><a href="nagios.html#id1427308">2.3.2.1. http</a></span></dt><dt><span class="section"><a href="nagios.html#id1427325">2.3.2.2. mysql hosts</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="nagios.html#id1427340">2.4. Monitor Client nrpe</a></span></dt><dd><dl><dt><span class="section"><a href="nagios.html#id1427343">2.4.1. Nagios3 nrpe plugins</a></span></dt><dt><span class="section"><a href="nagios.html#id1427366">2.4.2. nagios-nrpe-server</a></span></dt></dl></dd><dt><span class="section"><a href="nagios.html#id1427401">2.5. Monitoring Windows Machines</a></span></dt><dd><dl><dt><span class="section"><a href="nagios.html#id1427404">2.5.1. NSClient++</a></span></dt><dt><span class="section"><a href="nagios.html#id1427410">2.5.2. check_nt</a></span></dt><dt><span class="section"><a href="nagios.html#id1427436">2.5.3. Enable Password Protection</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="munin.html">3. Munin</a></span></dt><dd><dl><dt><span class="section"><a href="munin.html#id1427451">3.1. Installation Monitor Server</a></span></dt><dt><span class="section"><a href="munin.html#id1427462">3.2. Installation Node</a></span></dt><dt><span class="section"><a href="munin.html#id1427471">3.3. Additional Plugins</a></span></dt><dt><span class="section"><a href="munin.html#id1427480">3.4. plugins</a></span></dt><dd><dl><dt><span class="section"><a href="munin.html#id1427483">3.4.1. mysql</a></span></dt><dt><span class="section"><a href="munin.html#id1427501">3.4.2. apache</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="zabbix.html">4. Zabbix</a></span></dt><dd><dl><dt><span class="section"><a href="zabbix.html#id1427516">4.1. Installing and Configuring Zabbix</a></span></dt><dt><span class="section"><a href="zabbix.html#id1427556">4.2. web ui</a></span></dt><dt><span class="section"><a href="zabbix.html#id1427566">4.3. zabbix-agent</a></span></dt></dl></dd><dt><span class="section"><a href="ganglia.html">5. Ganglia</a></span></dt><dd><dl><dt><span class="section"><a href="ganglia.html#id1427606">5.1. Server</a></span></dt><dt><span class="section"><a href="ganglia.html#id1427626">5.2. Client</a></span></dt><dt><span class="section"><a href="ganglia.html#id1427639">5.3. Plugin</a></span></dt><dt><span class="section"><a href="ganglia.html#centos.ganglia">5.4. Installing Ganglia on Centos</a></span></dt></dl></dd><dt><span class="section"><a href="big_brother.html">6. BIG BROTHER</a></span></dt><dt><span class="section"><a href="bandwidth.html">7. Bandwidth</a></span></dt><dt><span class="section"><a href="opennms.html">8. OpenNMS</a></span></dt><dt><span class="section"><a href="pcp.html">9. Performance Co-Pilot</a></span></dt><dt><span class="section"><a href="clumon.html">10. Clumon Performance Monitor</a></span></dt><dt><span class="section"><a href="Zenoss.html">11. Zenoss</a></span></dt><dt><span class="section"><a href="ch60s12.html">12. 商业软件</a></span></dt></dl></div><div class="section" title="1. Cacti"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cacti"></a>1. Cacti</h2></div></div></div><p>Cacti is a complete network graphing solution designed to harness the power of RRDTool's data storage and graphing functionality. Cacti provides a fast poller, advanced graph templating, multiple data acquisition methods, and user management features out of the box. All of this is wrapped in an intuitive, easy to use interface that makes sense for LAN-sized installations up to complex networks with hundreds of devices.</p><p>homepage: http://www.cacti.net/</p><p>Cacti requires MySQL, PHP, RRDTool, net-snmp, and a webserver that supports PHP such as Apache. </p><pre class="screen">
sudo apt-get install rrdtool
sudo apt-get install snmp snmpd
sudo apt-get install php5-snmp
	</pre><p><a class="link" href="../network/snmp.html" title="第 33 章 NET SNMP (Simple Network Management Protocol)">At first, install snmp for linux</a></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>wget http://www.cacti.net/downloads/cacti-0.8.7b.tar.gz</p></li><li class="listitem"><p>tar zxvf cacti-0.8.7b.tar.gz</p></li><li class="listitem"><p>mv cacti-0.8.7b /home/netkiller/public_html/cacti</p></li><li class="listitem"><p> mysqladmin --user=root create cacti </p></li><li class="listitem"><p> mysql -uroot -p cacti &lt; cacti.sql </p></li><li class="listitem"><p>echo "GRANT ALL ON cacti.* TO cactiuser@localhost IDENTIFIED BY 'somepassword';" | mysql -uroot -p</p></li><li class="listitem"><p>echo "flush privileges;" | mysql -uroot -p</p></li><li class="listitem"><p>vi include/config.php</p><div class="example"><a id="id1426996"></a><p class="title"><b>例 60.1. cacti config.php</b></p><div class="example-contents"><pre class="programlisting">
				
$database_type = "mysql";
$database_default = "cacti";
$database_hostname = "localhost";
$database_username = "cactiuser";
$database_password = "somepassword";
$database_port = "3306";
				
				</pre></div></div><br class="example-break" /></li><li class="listitem"><p>crontab -e</p><p> */5 * * * * php /var/www/neo.6600.org/html/cacti/poller.php &gt; /dev/null 2&gt;&amp;1 </p><p>or</p><p>/etc/crontab</p><p> */5 * * * * nobody php /home/netkiller/public_html/cacti/poller.php &gt; /dev/null 2&gt;&amp;1 </p></li><li class="listitem"><p>mkdir -p  /var/log/cacti/</p></li></ol></div><p>configure cacti</p><p><a class="ulink" href="http://your-server/cacti/" target="_top">http://your-server/cacti/</a></p><div class="section" title="1.1. Template"><div class="titlepage"><div><div><h3 class="title"><a id="id1427032"></a>1.1. Template</h3></div></div></div><p>MySQL Template: <a class="ulink" href="http://code.google.com/p/mysql-cacti-templates/" target="_top">http://code.google.com/p/mysql-cacti-templates/</a></p><pre class="screen">
$ cd /usr/local/src/
$ wget http://mysql-cacti-templates.googlecode.com/files/better-cacti-templates-1.1.7.tar.gz
$ tar zxvf better-cacti-templates-1.1.7.tar.gz
$ cd better-cacti-templates-1.1.7/
$ cp scripts/ss_get_mysql_stats.php /usr/share/cacti/site/scripts
		</pre><p>default password</p><pre class="screen">
		
vim /usr/share/cacti/site/scripts/ss_get_mysql_stats.php.cnf
&lt;?php
$mysql_user = "root";
$mysql_pass = "s3cret";
?&gt;		
		
		</pre><p>Import Templates</p><pre class="screen">
		
Import/Export -&gt; Import Templates -&gt; Import Template from Local File -&gt; Save
		
		</pre><p>设置模版</p><pre class="screen">
Templates -&gt; 

X MyISAM Indexes DT
X MyISAM Key Cache DT
X MySQL Binary/Relay Logs DT
X MySQL Command Counters DT
X MySQL Connections DT
X MySQL Files and Tables DT
X MySQL Handlers DT
X MySQL Network Traffic DT
X MySQL Processlist DT
X MySQL Query Cache DT
X MySQL Query Cache Memory DT
X MySQL Replication DT
X MySQL Select Types DT
X MySQL Sorts DT
X MySQL Table Locks DT
X MySQL Temporary Objects DT
X MySQL Threads DT
X MySQL Transaction Handler DT

-&gt;

Custom Data
Hostname
Username	#单击复选框，并输入默认用户名
Password	#单击复选框，并输入默认密码
Port

-&gt; Save
		
		</pre></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch59s05.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="index.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="nagios.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">5. Unicornscan，Zenmap，nast </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 2. Nagios</td></tr></table></div><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2033740-1");
pageTracker._trackPageview();
} catch(err) {}</script></body></html>
