<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 1 章 MySQL Server</title><link rel="stylesheet" type="text/css" href="..//docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="../index.html" title="Netkiller MySQL 手札" /><link rel="up" href="../index.html" title="Netkiller MySQL 手札" /><link rel="prev" href="../reader.html" title="1.3. 写给读者" /><link rel="next" href="my.cnf.html" title="1.2. my.cnf" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 1 章 MySQL Server</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../reader.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="my.cnf.html">下一页</a></td></tr></table><hr /></div><table xmlns="" width="100%" border="0"><tr><td align="left"><a href="http://netkiller.github.io/">Home</a> |
        <a href="http://netkiller.sourceforge.net/">Mirror</a> |
        <a href="/search.html">Search</a></td><td><a href="http://netkiller-github-com.iteye.com/">ITEYE 博客</a> |
        <a href="http://my.oschina.net/neochen/">OSChina 博客</a> |
        <a href="http://rline.blog.51cto.com/">51CTO 博客</a></td><td><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="index"></a>第 1 章 MySQL Server</h1></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="index.html#mysql.install">1.1. MySQL Installation</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#mysql.ubuntu">1.1.1. Installation by apt-get under debian/ubuntu</a></span></dt><dt><span class="section"><a href="index.html#mysql.source">1.1.2. Installation by source code</a></span></dt><dt><span class="section"><a href="index.html#mysql.binary">1.1.3. MySQL binary distribution</a></span></dt><dt><span class="section"><a href="index.html#idp61146464">1.1.4. mysql-5.5.21-debian6.0-i686.deb</a></span></dt><dt><span class="section"><a href="index.html#mysql.centos">1.1.5. CentOS 6.2 + MySQL 5.5.25 (RPM)</a></span></dt><dt><span class="section"><a href="index.html#idp61152080">1.1.6. mysql-admin</a></span></dt><dt><span class="section"><a href="index.html#idp61155104">1.1.7. Installing MySQL on Linux Using the MySQL Yum Repository</a></span></dt><dt><span class="section"><a href="index.html#mariadb">1.1.8. MariaDB</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#idp61157216">1.1.8.1. CentOS YUM 安装 MariaDB</a></span></dt></dl></dd><dt><span class="section"><a href="index.html#firewall">1.1.9. Firewall</a></span></dt></dl></dd><dt><span class="section"><a href="my.cnf.html">1.2. my.cnf</a></span></dt><dd><dl><dt><span class="section"><a href="my.cnf.html#idp61172096">1.2.1. bind-address</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61173344">1.2.2. Configuring Database Character Encoding</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61179280">1.2.3. max_connections</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61180752">1.2.4. storage-engine</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61182128">1.2.5. max_allowed_packet</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61183504">1.2.6. skip-name-resolve</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61197424">1.2.7. 禁用TCP/IP链接</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61198912">1.2.8. timeout</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61201776">1.2.9. 与复制有关的参数</a></span></dt><dd><dl><dt><span class="section"><a href="my.cnf.html#idp61202640">1.2.9.1. 定义 log-bin 文件名</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61204016">1.2.9.2. expire-logs-days</a></span></dt></dl></dd><dt><span class="section"><a href="my.cnf.html#idp61205936">1.2.10. 与 InnoDB 有关的配置项</a></span></dt><dt><span class="section"><a href="my.cnf.html#idp61209504">1.2.11. Example for my.cnf</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html">1.3. Replication</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#master.slave">1.3.1. Master Slave</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#replication.master">1.3.1.1. Master</a></span></dt><dt><span class="section"><a href="replication.html#replication.slave">1.3.1.2. Slave</a></span></dt><dt><span class="section"><a href="replication.html#replication.testing">1.3.1.3. Testing</a></span></dt><dt><span class="section"><a href="replication.html#replication.db">1.3.1.4. 将现有数据库迁移到主从结构数据库</a></span></dt><dt><span class="section"><a href="replication.html#replication.privi">1.3.1.5. 主从复制安全问题</a></span></dt><dt><span class="section"><a href="replication.html#replication.error">1.3.1.6. 主从不同步问题</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html#master.master">1.3.2. Master Master(主主)</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#idp61280784">1.3.2.1. Master A</a></span></dt><dt><span class="section"><a href="replication.html#idp61284464">1.3.2.2. Master B</a></span></dt><dt><span class="section"><a href="replication.html#idp61289040">1.3.2.3. 将Master A 数据库 同步到 Master B 两端数据库内容保持一致</a></span></dt><dt><span class="section"><a href="replication.html#idp61292080">1.3.2.4. Master A - B 同步两端数据库</a></span></dt><dt><span class="section"><a href="replication.html#idp61295040">1.3.2.5. Master A 数据库解除只读权限</a></span></dt><dt><span class="section"><a href="replication.html#idp61296960">1.3.2.6. 查看主主的工作状态</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html#replication.error">1.3.3. 与复制有关的问题</a></span></dt><dd><dl><dt><span class="section"><a href="replication.html#replication.expire-logs-days">1.3.3.1. mysql-bin 清理问题</a></span></dt><dt><span class="section"><a href="replication.html#idp61302976">1.3.3.2. Semisynchronous Replication</a></span></dt></dl></dd><dt><span class="section"><a href="replication.html#multi-master">1.3.4. multi-master replication</a></span></dt><dt><span class="section"><a href="replication.html#multi-source">1.3.5. multi-source replication</a></span></dt></dl></dd><dt><span class="section"><a href="cluster.html">1.4. MySQL Custer</a></span></dt><dd><dl><dt><span class="section"><a href="cluster.html#cluster.mgm">1.4.1. Management node (MGM node)</a></span></dt><dt><span class="section"><a href="cluster.html#cluster.data">1.4.2. Data node</a></span></dt><dt><span class="section"><a href="cluster.html#cluster.sql">1.4.3. SQL node</a></span></dt><dt><span class="section"><a href="cluster.html#cluster.start">1.4.4. Starting</a></span></dt><dt><span class="section"><a href="cluster.html#cluster.shut">1.4.5. Shutdown</a></span></dt><dt><span class="section"><a href="cluster.html#cluster.testing">1.4.6. Testing</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-proxy.html">1.5. MySQL Proxy</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-proxy.html#idp61347456">1.5.1. Ubuntu</a></span></dt><dt><span class="section"><a href="mysql-proxy.html#idp61359296">1.5.2. CentOS</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-proxy.html#idp61366176">1.5.2.1. FAQ</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="monitoring.html">1.6. Monitoring</a></span></dt><dd><dl><dt><span class="section"><a href="monitoring.html#mon.prog">1.6.1. Analysis and Optimization</a></span></dt><dd><dl><dt><span class="section"><a href="monitoring.html#mytop">1.6.1.1. mytop - top like query monitor for MySQL</a></span></dt><dt><span class="section"><a href="monitoring.html#mtop">1.6.1.2. mtop - MySQL terminal based query monitor</a></span></dt><dt><span class="section"><a href="monitoring.html#idp61376976">1.6.1.3. innotop</a></span></dt><dt><span class="section"><a href="monitoring.html#mysqlreport">1.6.1.4. mysqlreport - A friendly report of important MySQL status values</a></span></dt><dt><span class="section"><a href="monitoring.html#mysqltuner">1.6.1.5. mysqltuner - MySQL configuration assistant</a></span></dt></dl></dd><dt><span class="section"><a href="monitoring.html#monitoring.munin">1.6.2. Munin</a></span></dt><dt><span class="section"><a href="monitoring.html#monitoring.cacti">1.6.3. Cacti</a></span></dt><dt><span class="section"><a href="monitoring.html#mysql.snmp">1.6.4. Monitoring MySQL with SNMP</a></span></dt></dl></dd><dt><span class="section"><a href="show.html">1.7. SHOW COMMAND</a></span></dt><dd><dl><dt><span class="section"><a href="show.html#version">1.7.1. 查看版本</a></span></dt><dt><span class="section"><a href="show.html#show.status">1.7.2. status</a></span></dt><dd><dl><dt><span class="section"><a href="show.html#show.status">1.7.2.1. show status</a></span></dt><dt><span class="section"><a href="show.html#idp61407360">1.7.2.2. show master status</a></span></dt><dt><span class="section"><a href="show.html#idp61409168">1.7.2.3. show slave status</a></span></dt><dt><span class="section"><a href="show.html#idp61410592">1.7.2.4. show plugins</a></span></dt></dl></dd><dt><span class="section"><a href="show.html#show.processlist">1.7.3. show processlist</a></span></dt><dt><span class="section"><a href="show.html#variables">1.7.4. variables</a></span></dt><dd><dl><dt><span class="section"><a href="show.html#wait_timeout">1.7.4.1. wait_timeout</a></span></dt><dt><span class="section"><a href="show.html#table_lock_wait_timeout">1.7.4.2. table_lock_wait_timeout</a></span></dt><dt><span class="section"><a href="show.html#low_priority_updates">1.7.4.3. low_priority_updates</a></span></dt><dt><span class="section"><a href="show.html#character_set">1.7.4.4. character_set</a></span></dt><dt><span class="section"><a href="show.html#datadir">1.7.4.5. datadir</a></span></dt><dt><span class="section"><a href="show.html#storage_engine">1.7.4.6. storage_engine</a></span></dt><dt><span class="section"><a href="show.html#timeout">1.7.4.7. timeout</a></span></dt><dt><span class="section"><a href="show.html#max_connections">1.7.4.8. max_connections</a></span></dt></dl></dd><dt><span class="section"><a href="show.html#binary">1.7.5. binary 日志</a></span></dt><dt><span class="section"><a href="show.html#databases">1.7.6. DATABASES</a></span></dt><dt><span class="section"><a href="show.html#table">1.7.7. TABLE</a></span></dt><dt><span class="section"><a href="show.html#function">1.7.8. FUNCTION</a></span></dt><dt><span class="section"><a href="show.html#procedure">1.7.9. PROCEDURE</a></span></dt><dt><span class="section"><a href="show.html#triggers">1.7.10. TRIGGERS</a></span></dt><dt><span class="section"><a href="show.html#events">1.7.11. EVENTS</a></span></dt><dt><span class="section"><a href="show.html#engines">1.7.12. 引擎(ENGINES)</a></span></dt><dt><span class="section"><a href="show.html#collation">1.7.13. 字符集(Collation)</a></span></dt><dt><span class="section"><a href="show.html#show.grants">1.7.14. SHOW GRANTS</a></span></dt></dl></dd></dl></div>
	
	

<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="mysql.install"></a>1.1. MySQL Installation</h2></div></div></div>
	
	<p>http://downloads.mysql.com/archives.php</p>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql.ubuntu"></a>1.1.1. Installation by apt-get under debian/ubuntu</h3></div></div></div>
		
		<p>安装环境 ubuntu 8.10</p>
		<pre class="screen">
sudo apt-get install mysql-server
		</pre>
		<p>New password for the MySQL "root" user</p>
		<pre class="screen">
		
         ┌──────────────────────┤ Configuring mysql-server-5.0 ├─────────────────────┐
         │ While not mandatory, it is highly recommended that you set a password for the MySQL administrative "root" user.  │
         │                                                                                                                  │
         │ If that field is left blank, the password will not be changed.                                                   │
         │                                                                                                                  │
         │ New password for the MySQL "root" user:                                                                          │
         │                                                                                                                  │
         │ ****____________________________________________________________________________________________________________ │
         │                                                                                                                  │
         │                                                      &lt;Ok&gt;                                                        │
         │                                                                                                                  │
         └─────────────────────────────────────────────────────────────┘
		
		</pre>
		<p>Repeat password for the MySQL "root" user</p>
		<pre class="screen">
		
         ┌───┤ Configuring mysql-server-5.0 ├────┐
         │                                             │
         │                                             │
         │ Repeat password for the MySQL "root" user:  │
         │                                             │
         │ ****_______________________________________ │
         │                                             │
         │                   &lt;Ok&gt;                      │
         │                                             │
         └─────────────────────────┘
         
		</pre>
		<p>create database</p>
		<pre class="screen">
		
create database example;

mysql&gt; SHOW GRANTS;
+----------------------------------------------------------------------------------------------------------------------------------------+
| Grants for root@localhost                                                                                                              |
+----------------------------------------------------------------------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY PASSWORD '*C6325DAF39AE6CC34E960D3C65F1398FE467E1D0' WITH GRANT OPTION |
+----------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

GRANT ALL PRIVILEGES ON example.* TO 'dbuser'@'localhost' IDENTIFIED BY '******' WITH GRANT OPTION;
FLUSH PRIVILEGES;

./mysql -udbuser -p
Enter password:

./mysql -udbuser -p example &lt; /tmp/example_china_copy.sql

./mysql -uroot
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 6
Server version: 5.0.45 Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; use example;
Database changed
mysql&gt; show tables;
		
		</pre>
		<p>配置文件样本</p>
		<pre class="screen">
debian:~# ls /usr/share/doc/mysql-server-5.0/examples/
my-huge.cnf.gz  my-innodb-heavy-4G.cnf.gz  my-large.cnf.gz  my-medium.cnf.gz  my-small.cnf  ndb_mgmd.cnf
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql.source"></a>1.1.2. Installation by source code</h3></div></div></div>
		
		<pre class="screen">
		
./configure \
--prefix=/usr/local/$MYSQL_DIR \
--enable-assembler \
--enable-local-infile \
--with-charset=utf8 \
--with-collation=utf8_general_ci \
--with-extra-charsets=none \
--with-openssl \
--with-pthread \
--with-unix-socket-path=/var/lib/mysql/mysql.sock \
--with-mysqld-user=mysql \
--with-mysqld-ldflags \
--with-client-ldflags \
--with-comment \
--with-big-tables \
--without-ndb-debug \
--without-docs \
--without-debug \
--without-bench

make &amp;&amp; make install
		
		</pre>
		<p>/usr/local/$MYSQL_DIR/bin/mysql_install_db</p>
		<p>other option</p>
		<pre class="screen">
--without-isam
--without-innodb
--without-ndbcluster
--without-blackhole
--without-ibmdb2i
--without-federated
--without-example
--without-comment
--localstatedir=/usr/local/mysql/data
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql.binary"></a>1.1.3. MySQL binary distribution</h3></div></div></div>
		
		<pre class="screen">
		
shell&gt; groupadd mysql
shell&gt; useradd -r -g mysql mysql
shell&gt; cd /usr/local
shell&gt; tar zxvf /path/to/mysql-VERSION-OS.tar.gz
shell&gt; ln -s full-path-to-mysql-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; chown -R mysql .
shell&gt; chgrp -R mysql .
shell&gt; scripts/mysql_install_db --user=mysql
shell&gt; chown -R root .
shell&gt; chown -R mysql data
# Next command is optional
shell&gt; cp support-files/my-medium.cnf /etc/my.cnf
shell&gt; bin/mysqld_safe --user=mysql &amp;
# Next command is optional
shell&gt; cp support-files/mysql.server /etc/init.d/mysql.server
		
		</pre>
		<p>install core database</p>
		<pre class="screen">
		
[root@test mysql]# ./scripts/mysql_install_db
Installing MySQL system tables...
100428 23:16:20 [Warning] '--skip-locking' is deprecated and will be removed in a future release. Please use '--skip-external-locking' instead.
OK
Filling help tables...
100428 23:16:20 [Warning] '--skip-locking' is deprecated and will be removed in a future release. Please use '--skip-external-locking' instead.
OK

To start mysqld at boot time you have to copy
support-files/mysql.server to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:

./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h db.example.com password 'new-password'

Alternatively you can run:
./bin/mysql_secure_installation

which will also give you the option of removing the test
databases and anonymous user created by default.  This is
strongly recommended for production servers.

See the manual for more instructions.

You can start the MySQL daemon with:
cd . ; ./bin/mysqld_safe &amp;

You can test the MySQL daemon with mysql-test-run.pl
cd ./mysql-test ; perl mysql-test-run.pl

Please report any problems with the ./bin/mysqlbug script!
		
		</pre>
		<p>set root's password</p>
		<pre class="screen">
[root@test mysql]# cp support-files/mysql.server /etc/init.d/mysqld
[root@test mysql]# /etc/init.d/mysqld start
Starting MySQL.                                            [  OK  ]

[root@test mysql]# ./bin/mysqladmin -u root password 'chen'
[root@test mysql]# ./bin/mysqladmin -u root -h db.example.com password 'chen'
		</pre>
		<p>test</p>
		<pre class="screen">
		
[root@test mysql]# ./bin/mysql -uroot -pchen
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.1.45 MySQL Community Server (GPL)

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt;
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp61146464"></a>1.1.4. mysql-5.5.21-debian6.0-i686.deb</h3></div></div></div>
		
		<pre class="screen">
		
sudo apt-get install libaio1


sudo groupadd mysql
sudo useradd -r -g mysql mysql

sudo dpkg -i mysql-5.5.21-debian6.0-i686.deb

cd /opt/mysql/
sudo chown -R mysql .
sudo chgrp -R mysql .

cd server-5.5/

sudo support-files/binary-configure

sudo chown -R mysql data

# Next command is optional
shell&gt; cp support-files/my-medium.cnf /etc/my.cnf

shell&gt; bin/mysqld_safe --user=mysql &amp;

# Next command is optional
sudo cp support-files/mysql.server /etc/init.d/mysql
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mysql.centos"></a>1.1.5. CentOS 6.2 + MySQL 5.5.25 (RPM)</h3></div></div></div>
		
		<p>准备下面的软件包</p>
		<pre class="screen">
# ls -1
MySQL-client-5.5.25-1.el6.x86_64.rpm
MySQL-devel-5.5.25-1.el6.x86_64.rpm
MySQL-server-5.5.25-1.el6.x86_64.rpm
MySQL-shared-5.5.25-1.el6.x86_64.rpm
MySQL-shared-compat-5.5.25-1.el6.x86_64.rpm
		</pre>
		<p>使用 yum 本地安装 rpm, yum 可以帮你解决依赖于冲突 </p>
		<pre class="screen">
# yum localinstall MySQL-*
		</pre>
		<pre class="screen">
# /etc/init.d/mysql start
Starting MySQL... SUCCESS!

# /usr/bin/mysqladmin -u root password 'tUG26WSslP30bkbwtMhn'
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp61152080"></a>1.1.6. mysql-admin</h3></div></div></div>
		
		<pre class="screen">
$ sudo apt-get install mysql-admin
		</pre>
		<p>运行mysql-admin</p>
		<pre class="screen">
/usr/bin/mysql-admin
		</pre>
		<p>运行 mysql-query-browser </p>
		<pre class="screen">
mysql-query-browser --query="SELECT * FROM users"
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp61155104"></a>1.1.7. Installing MySQL on Linux Using the MySQL Yum Repository</h3></div></div></div>
		
		<p>http://dev.mysql.com/doc/mysql-repo-excerpt/5.6/en/linux-installation-yum-repo.html</p>
		<pre class="screen">
yum localinstall http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm
		</pre>
	</div>
	
<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mariadb"></a>1.1.8. MariaDB</h3></div></div></div>
	
	<p>http://mariadb.org/</p>
	<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp61157216"></a>1.1.8.1. CentOS YUM 安装 MariaDB</h4></div></div></div>
		
		<pre class="screen">
		
cat &gt;&gt; /etc/yum.repos.d/MariaDB.repo &lt;&lt;EOF
# MariaDB 5.5 CentOS repository list - created 2013-12-04 02:17 UTC
# http://mariadb.org/mariadb/repositories/
[mariadb]
name = MariaDB
baseurl = http://yum.mariadb.org/5.5/centos6-amd64
gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
gpgcheck=1
EOF
		
		</pre>
		<pre class="screen">
# yum search MariaDB | grep MariaDB
============================= N/S Matched: MariaDB =============================
MariaDB-Galera-server.x86_64 : MariaDB: a very fast and robust SQL database
MariaDB-client.x86_64 : MariaDB: a very fast and robust SQL database server
MariaDB-common.x86_64 : MariaDB: a very fast and robust SQL database server
MariaDB-compat.x86_64 : MariaDB: a very fast and robust SQL database server
MariaDB-devel.x86_64 : MariaDB: a very fast and robust SQL database server
MariaDB-server.x86_64 : MariaDB: a very fast and robust SQL database server
MariaDB-shared.x86_64 : MariaDB: a very fast and robust SQL database server
MariaDB-test.x86_64 : MariaDB: a very fast and robust SQL database server
		</pre>
		<p>安装数据库</p>
		<pre class="screen">
# yum install -y MariaDB-server MariaDB-client
		</pre>
		<p>指定默认root密码</p>
		<pre class="screen">
# mysqladmin -u root password 'chen'
		</pre>
		<p>数据库安全配置</p>
		<pre class="screen">
# /usr/bin/mysql_secure_installation
/usr/bin/mysql_secure_installation: line 379: find_mysql_client: command not found

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need the current
password for the root user.  If you've just installed MariaDB, and
you haven't set the root password yet, the password will be blank,
so you should just press enter here.

Enter current password for root (enter for none):
OK, successfully used password, moving on...

Setting the root password ensures that nobody can log into the MariaDB
root user without the proper authorisation.

You already have a root password set, so you can safely answer 'n'.

Change the root password? [Y/n]
New password:
Re-enter new password:
Password updated successfully!
Reloading privilege tables..
 ... Success!


By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n]
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n]
 ... Success!

By default, MariaDB comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n]
 - Dropping test database...
 ... Success!
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n]
 ... Success!

Cleaning up...

All done!  If you've completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!
		</pre>
		<p>进入数据库</p>
		<pre class="screen">
		
# mysql -uroot -pchen
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 12
Server version: 5.5.34-MariaDB MariaDB Server

Copyright (c) 2000, 2013, Oracle, Monty Program Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.00 sec)

MariaDB [(none)]&gt; use mysql;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB [mysql]&gt;
		
		</pre>
		<p>使用上与MySQL并无差异</p>
	</div>
</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="firewall"></a>1.1.9. Firewall</h3></div></div></div>
		
		<p>iptables</p>
		<pre class="screen">
iptables -A INPUT -i eth0 -p tcp -s xxx.xxx.xxx.xxx --dport 3306 -j ACCEPT
		</pre>
	</div>
</div>

	
	

	


	

	


	

</div><div xmlns="" id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"><a class="bds_fbook"></a><a class="bds_twi"></a><a class="bds_ms"></a><a class="bds_msn"></a><a class="bds_buzz"></a><a class="bds_linkedin"></a><a class="bds_deli"></a><a class="bds_qzone"></a><a class="bds_qq"></a><a class="bds_tqq"></a><a class="bds_tqf"></a><a class="bds_tsina"></a><a class="bds_baidu"></a><a class="bds_renren"></a><a class="bds_t163"></a><a class="bds_tfh"></a><a class="bds_douban"></a><a class="bds_hi"></a><a class="bds_tieba"></a><a class="bds_tsohu"></a><span class="bds_more"></span><a class="shareCount"></a></div><script xmlns="" type="text/javascript" id="bdshare_js" data="type=tools"></script><script xmlns="" type="text/javascript" id="bdshell_js"></script><script xmlns="" type="text/javascript">
	document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
</script><div xmlns="" id="disqus_thread"></div><script xmlns="" type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

            //if(document.domain == 'netkiller.github.com'){
            var disqus_shortname = 'netkiller'; // required: replace example with your forum shortname
            //}else{
			//var disqus_shortname = 'neochan';
            //}

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript xmlns="">Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a xmlns="" href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><br xmlns="" /><div xmlns="" id="clustrmaps-widget"></div><script xmlns="" type="text/javascript">var _clustrmaps = {'url' : 'http://netkiller.github.io', 'user' : 1107643, 'server' : '2', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2013-08-14', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www2.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript xmlns=""><a href="http://www2.clustrmaps.com/user/87410e6bb"><img src="http://www2.clustrmaps.com/stats/maps-no_clusters/netkiller.github.io-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../reader.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="my.cnf.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">1.3. 写给读者 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 1.2. my.cnf</td></tr></table></div><script xmlns="" type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11694057-1']);
  _gaq.push(['_setDomainName', 'netkiller.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script xmlns="" type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F997cd4a7320a82d72cb74d179118f697' type='text/javascript'%3E%3C/script%3E"));
</script></body></html>