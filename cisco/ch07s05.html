<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>7.5. Example</title><link rel="stylesheet" type="text/css" href="/docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><meta name="keywords" content="pix,asa,3750,4507,5550, vlan,vtp, hsrp,vrrp, rip,ospf" /><link rel="home" href="index.html" title="Netkiller Cisco IOS 手札" /><link rel="up" href="firewall.html" title="第 7 章 Firewall" /><link rel="prev" href="faq.html" title="7.4. FAQ" /><link rel="next" href="netflow.html" title="第 8 章 Netflow" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.5. Example</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="faq.html">上一页</a> </td><th width="60%" align="center">第 7 章 Firewall</th><td width="20%" align="right"> <a accesskey="n" href="netflow.html">下一页</a></td></tr></table><hr /></div><table xmlns="" width="100%" border="0"><tr><td align="left"><a href="http://netkiller.github.io/">Home</a> |
        <a href="http://netkiller.sourceforge.net/">Mirror</a> |
        <a href="/search.html">Search</a> |
        <a href="http://netkiller-github-com.iteye.com/">ITEYE 博客</a> |
        <a href="http://my.oschina.net/neochen/">OSChina 博客</a> |
        <a href="http://rline.blog.51cto.com/">51CTO 博客</a></td><td><div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"><a class="bds_fbook"></a><a class="bds_twi"></a><a class="bds_ms"></a><a class="bds_msn"></a><a class="bds_buzz"></a><a class="bds_linkedin"></a><a class="bds_deli"></a><a class="bds_qzone"></a><a class="bds_qq"></a><a class="bds_tqq"></a><a class="bds_tqf"></a><a class="bds_tsina"></a><a class="bds_baidu"></a><a class="bds_renren"></a><a class="bds_t163"></a><a class="bds_tfh"></a><a class="bds_douban"></a><a class="bds_hi"></a><a class="bds_tieba"></a><a class="bds_tsohu"></a><span class="bds_more"></span><a class="shareCount"></a></div><script type="text/javascript" id="bdshare_js" data="type=tools"></script><script type="text/javascript" id="bdshell_js"></script><script type="text/javascript">
	document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
</script></td><td><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table><div class="section" title="7.5. Example"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp739968"></a>7.5. Example</h2></div></div></div>
		
		<div class="section" title="7.5.1. ASA Firewall"><div class="titlepage"><div><div><h3 class="title"><a id="idp740736"></a>7.5.1. ASA Firewall</h3></div></div></div>
			

		<div class="example"><a id="idp741600"></a><p class="title"><strong>例 7.2. ASA 5550</strong></p><div class="example-contents">
			
			<pre class="screen">
			
: Saved
:
ASA Version 8.2(1)
!
hostname asa5550
enable password Yi7fhXUH4X/ZMh encrypted
passwd 2KFQnNId2KYOU encrypted
names
!
interface GigabitEthernet0/0
 nameif outside
 security-level 0
 ip address 110.112.133.60 255.255.255.192
!
interface GigabitEthernet0/1
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet0/2
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet0/3
 shutdown
 no nameif
 no security-level
 no ip address
!
interface Management0/0
 nameif management
 security-level 100
 ip address 192.168.1.1 255.255.255.0
 management-only
!
interface GigabitEthernet1/0
 nameif inside
 security-level 100
 ip address 172.16.0.254 255.255.255.0
!
interface GigabitEthernet1/1
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/2
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet1/3
 shutdown
 no nameif
 no security-level
 no ip address
!
ftp mode passive
access-list outside extended permit icmp any any
access-list outside extended permit udp any host 110.112.133.20 eq domain
access-list outside extended permit udp any host 110.112.133.23 eq domain
access-list outside extended permit udp any host 110.112.133.18 eq domain
access-list outside extended permit tcp any host 110.112.133.18 eq ssh
access-list outside extended permit tcp any host 110.112.133.7 eq ftp
access-list outside extended permit tcp any host 110.112.133.21 eq www
access-list outside extended permit tcp any host 110.112.133.22 eq www
access-list outside extended permit tcp any host 110.112.133.13 eq 3389
access-list outside extended permit tcp any host 110.112.133.24 eq 3389
access-list outside extended permit tcp any host 110.112.133.9 eq www
access-list outside extended permit tcp any host 110.112.133.29 eq ssh
access-list outside extended permit tcp any host 110.112.133.29 eq www
access-list outside extended permit udp any host 110.112.133.29 eq 1194
access-list outside extended permit tcp any host 110.112.133.6 eq www
access-list outside extended permit tcp any host 110.112.133.7 eq www
access-list outside extended permit tcp any host 110.112.133.8 eq www
access-list outside extended permit tcp any host 110.112.133.10 eq www
access-list outside extended permit tcp any host 110.112.133.11 eq www
access-list outside extended permit tcp any host 110.112.133.12 eq www
access-list outside extended permit tcp any host 110.112.133.27 eq www
access-list outside extended permit tcp any host 110.112.133.28 eq www
access-list outside extended permit tcp any host 110.112.133.25 eq www
access-list outside extended permit tcp any host 110.112.133.25 eq 3389
access-list outside extended permit tcp any host 110.112.133.18 eq 3306
access-list outside extended permit tcp any host 110.112.133.13 eq ftp
access-list outside extended permit tcp any host 110.112.133.13 eq 8000
access-list outside extended permit tcp any host 110.112.133.26 eq ssh
access-list outside extended permit tcp any host 110.112.133.5 eq www
access-list outside extended permit tcp any host 110.112.133.26 eq ftp
access-list outside extended permit tcp any host 110.112.133.14 eq 8080
access-list outside extended permit tcp any host 110.112.133.19 eq www
access-list outside extended permit tcp any host 110.112.133.17 eq www
access-list outside extended permit tcp any host 110.112.133.16 eq www
access-list outside extended permit tcp any host 110.112.133.4 eq www
access-list outside extended permit tcp any host 110.112.133.4 eq ftp
access-list outside extended permit tcp any host 110.112.133.4 eq ssh
access-list outside extended deny udp any host 110.112.133.7
access-list outside extended permit tcp any host 110.112.133.62 eq www
access-list outside extended permit tcp any host 110.112.133.62 eq ssh
access-list outside extended permit tcp any host 110.112.133.24 eq 5900
access-list outside extended permit tcp any host 110.112.133.35 eq www
access-list outside extended permit tcp any host 110.112.133.35 eq 3389
access-list outside extended permit tcp any host 110.112.133.38 eq www
access-list outside extended deny udp any host 110.112.133.38
access-list outside extended permit tcp any host 110.112.133.44 eq www
access-list outside extended permit tcp any host 110.112.133.44 eq 5900
access-list outside extended permit tcp any host 110.112.133.8 eq https
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.27 eq ssh
access-list outside extended permit tcp any any eq www
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.28 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.11 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.12 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.8 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.9 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.15 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.29 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.10 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.10 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.9 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.8 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.11 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.12 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.5 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.25 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.16 eq 3306
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.18 eq 3306
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.5 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.17 eq 1526
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.7 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.21 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.21 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.54 eq sqlnet
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.35 eq ftp
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.25 eq sqlnet
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.25 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.38 eq ssh
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.33
access-list outside extended permit tcp host 110.102.60.1 host 110.112.133.42 eq 3389
access-list outside extended permit tcp any host 110.112.133.44
access-list inside extended permit icmp any any
access-list inside extended permit ip any any
pager lines 24
logging asdm informational
mtu outside 1500
mtu management 1500
mtu inside 1500
no failover
icmp unreachable rate-limit 1 burst-size 1
asdm image disk0:/asdm-621.bin
no asdm history enable
arp timeout 14400
global (outside) 1 interface
nat (inside) 1 172.16.0.0 255.255.255.0
static (inside,outside) 110.112.133.61 172.16.0.51 netmask 255.255.255.255
static (inside,outside) 110.112.133.6 172.16.0.6 netmask 255.255.255.255
static (inside,outside) 110.112.133.7 172.16.0.7 netmask 255.255.255.255
static (inside,outside) 110.112.133.8 172.16.0.8 netmask 255.255.255.255
static (inside,outside) 110.112.133.10 172.16.0.10 netmask 255.255.255.255
static (inside,outside) 110.112.133.11 172.16.0.11 netmask 255.255.255.255
static (inside,outside) 110.112.133.12 172.16.0.12 netmask 255.255.255.255
static (inside,outside) 110.112.133.15 172.16.0.15 netmask 255.255.255.255
static (inside,outside) 110.112.133.28 172.16.0.28 netmask 255.255.255.255
static (inside,outside) 110.112.133.20 172.16.0.20 netmask 255.255.255.255
static (inside,outside) 110.112.133.23 172.16.0.23 netmask 255.255.255.255
static (inside,outside) 110.112.133.22 172.16.0.22 netmask 255.255.255.255
static (inside,outside) 110.112.133.13 172.16.0.33 netmask 255.255.255.255
static (inside,outside) 110.112.133.14 172.16.0.34 netmask 255.255.255.255
static (inside,outside) 110.112.133.24 172.16.0.41 netmask 255.255.255.255
static (inside,outside) 110.112.133.29 172.16.0.2 netmask 255.255.255.255
static (inside,outside) 110.112.133.9 172.16.0.9 netmask 255.255.255.255
static (inside,outside) 110.112.133.27 172.16.0.27 netmask 255.255.255.255
static (inside,outside) 110.112.133.26 172.16.0.26 netmask 255.255.255.255
static (inside,outside) 110.112.133.5 172.16.0.13 netmask 255.255.255.255
static (inside,outside) 110.112.133.19 172.16.0.19 netmask 255.255.255.255
static (inside,outside) 110.112.133.4 172.16.0.4 netmask 255.255.255.255
static (inside,outside) 110.112.133.16 172.16.0.56 netmask 255.255.255.255
static (inside,outside) 110.112.133.21 172.16.0.24 netmask 255.255.255.255
static (inside,outside) 110.112.133.35 172.16.0.35 netmask 255.255.255.255
static (inside,outside) 110.112.133.25 172.16.0.54 netmask 255.255.255.255
static (inside,outside) 110.112.133.38 172.16.0.38 netmask 255.255.255.255
static (inside,outside) 110.112.133.33 172.16.0.3 netmask 255.255.255.255
static (inside,outside) 110.112.133.42 172.16.0.42 netmask 255.255.255.255
static (inside,outside) 110.112.133.18 172.16.0.216 netmask 255.255.255.255
static (inside,outside) 110.112.133.44 172.16.0.44 netmask 255.255.255.255
access-group outside in interface outside
route outside 0.0.0.0 0.0.0.0 110.112.133.1 1
timeout xlate 3:00:00
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
dynamic-access-policy-record DfltAccessPolicy
aaa authentication telnet console LOCAL
aaa authentication ssh console LOCAL
aaa authentication http console LOCAL
http server enable
http 192.168.1.0 255.255.255.0 management
http 0.0.0.0 0.0.0.0 inside
no snmp-server location
no snmp-server contact
snmp-server enable traps snmp authentication linkup linkdown coldstart
crypto ipsec security-association lifetime seconds 28800
crypto ipsec security-association lifetime kilobytes 4608000
telnet 0.0.0.0 0.0.0.0 management
telnet 0.0.0.0 0.0.0.0 inside
telnet timeout 5
ssh 172.16.0.0 255.255.255.0 inside
ssh timeout 5
console timeout 0
dhcpd address 192.168.1.2-192.168.1.254 management
dhcpd enable management
!
dhcpd address 172.16.0.210-172.16.0.220 inside
dhcpd dns 8.8.8.8 interface inside
dhcpd enable inside
!
threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
webvpn
username root password 5UR7s8NU670UrLPQ encrypted
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum 512
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map
  inspect ftp
  inspect h323 h225
  inspect h323 ras
  inspect rsh
  inspect rtsp
  inspect esmtp
  inspect sqlnet
  inspect skinny
  inspect sunrpc
  inspect xdmcp
  inspect sip
  inspect netbios
  inspect tftp
  inspect icmp
  inspect http
!
service-policy global_policy global
prompt hostname context
Cryptochecksum:3d468f00f692b6364b2485bc8a3fa65c
: end

			
			</pre>
		</div></div><br class="example-break" />
		</div>
	</div><div xmlns="" id="disqus_thread"></div><script xmlns="" type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

            if(document.domain == 'netkiller.github.com'){
            var disqus_shortname = 'netkiller'; // required: replace example with your forum shortname
            }else{
			var disqus_shortname = 'neochan';
            }

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript xmlns="">Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a xmlns="" href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><br xmlns="" /><div xmlns="" id="clustrmaps-widget"></div><script xmlns="" type="text/javascript">var _clustrmaps = {'url' : 'http://netkiller.github.io', 'user' : 1107643, 'server' : '2', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2013-08-14', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www2.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript xmlns=""><a href="http://www2.clustrmaps.com/user/87410e6bb"><img src="http://www2.clustrmaps.com/stats/maps-no_clusters/netkiller.github.io-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="faq.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="firewall.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="netflow.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">7.4. FAQ </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 8 章 Netflow</td></tr></table></div><script xmlns="" type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11694057-1']);
  _gaq.push(['_setDomainName', 'netkiller.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script xmlns="" type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F997cd4a7320a82d72cb74d179118f697' type='text/javascript'%3E%3C/script%3E"));
</script></body></html>