<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 13 章 Partitioning</title><link rel="stylesheet" href="docbook.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="../index.html" title="Netkiller Database 手札" /><link rel="up" href="database.mysql.html" title="部分 II. MySQL" /><link rel="prev" href="ch12s06.html" title="6. Monitoring MySQL with SNMP" /><link rel="next" href="ch13s02.html" title="2. list" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 13 章 Partitioning</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch12s06.html">上一页</a> </td><th width="60%" align="center">部分 II. MySQL</th><td width="20%" align="right"> <a accesskey="n" href="ch13s02.html">下一页</a></td></tr></table><hr /><table width="100%" border="0"><tr><td align="left"><a href="http://netkiller.sourceforge.net/">Home</a> | 
		<a href="http://netkiller.github.com/">Mirror</a> |		
		<a href="/search.html">Search</a></td><td align="right"><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table></div><div class="chapter" title="第 13 章 Partitioning"><div class="titlepage"><div><div><h2 class="title"><a id="partition"></a>第 13 章 Partitioning</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl><dt><span class="section"><a href="partition.html#id1292385">1. range</a></span></dt><dt><span class="section"><a href="ch13s02.html">2. list</a></span></dt><dt><span class="section"><a href="ch13s03.html">3. 添加分区</a></span></dt></dl></div><pre class="screen">
18.5.1. Partitioning Keys, Primary Keys, and Unique Keys
This section discusses the relationship of partitioning keys with primary keys and unique keys. The rule governing this relationship can be expressed as follows: All columns used in the partitioning expression for a partitioned table must be part of every unique key that the table may have.  

In other words, every unique key on the table must use every column in the table's partitioning expression. (This also includes the table's primary key, since it is by definition a unique key. This particular case is discussed later in this section.) For example, each of the following table creation statements is invalid:  


SQL code:
mysql&gt; create table tx (
    -&gt;     id int not null ,
    -&gt;     info_time date,
    -&gt;     primary key(id,info_time)
    -&gt; )
    -&gt; PARTITION BY RANGE(info_time div 100)
    -&gt; (
    -&gt;     PARTITION p_2008_11 VALUES LESS THAN (200812),
    -&gt;     PARTITION p_2008_12 VALUES LESS THAN (200901),
    -&gt;     PARTITION p_2009_01 VALUES LESS THAN (200902),
    -&gt;     PARTITION p_2009_02 VALUES LESS THAN (200903),
    -&gt;     PARTITION p_2009_03 VALUES LESS THAN (200904),
    -&gt;     PARTITION p_2009_04 VALUES LESS THAN (200905),
    -&gt;     PARTITION p_catch_all VALUES LESS THAN MAXVALUE
    -&gt; );
Query OK, 0 rows affected (0.17 sec)

mysql&gt;	
	</pre><pre class="screen">
	
mysql&gt; SHOW VARIABLES LIKE '%partition%';

+-------------------+-------+
| Variable_name     | Value |
+-------------------+-------+
| have_partitioning | YES   |
+-------------------+-------+
1 row in set (0.00 sec)
		
	</pre><p>SHOW PARTITIONS</p><pre class="screen">
	
	
	
	</pre><p>SHOW PARTITION STATUS</p><pre class="screen">
	
	
	
	</pre><div class="section" title="1. range"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id1292385"></a>1. range</h2></div></div></div><pre class="programlisting">
				
CREATE TABLE t1 (
    year_col  INT,
    some_data INT
)
PARTITION BY RANGE (year_col) (
    PARTITION p0 VALUES LESS THAN (1991),
    PARTITION p1 VALUES LESS THAN (1995),
    PARTITION p2 VALUES LESS THAN (1999),
    PARTITION p3 VALUES LESS THAN (2002),
    PARTITION p4 VALUES LESS THAN (2006),
    PARTITION p5 VALUES LESS THAN MAXVALUE
);			
				
		</pre><p>e.g.2</p><pre class="programlisting">
				
CREATE TABLE rc (
    a INT NOT NULL, 
    b INT NOT NULL
)
PARTITION BY RANGE COLUMNS(a,b) (
    PARTITION p0 VALUES LESS THAN (10,5),
    PARTITION p1 VALUES LESS THAN (20,10),
    PARTITION p2 VALUES LESS THAN (MAXVALUE,15),
    PARTITION p3 VALUES LESS THAN (MAXVALUE,MAXVALUE)
);		
				
		</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch12s06.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="database.mysql.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ch13s02.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">6. Monitoring MySQL with SNMP </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 2. list</td></tr></table></div><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2033740-1");
pageTracker._trackPageview();
} catch(err) {}</script></body></html>
