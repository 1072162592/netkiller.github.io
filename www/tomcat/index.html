<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 4 章 Apache Tomcat</title><link rel="stylesheet" type="text/css" href="..//docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="keywords" content="lamp,lnmp,famp,fnmp, cgi,fastcgi,wsgi, apache,lighttpd,nginx,tomcat, awstatus, webalizer" /><link rel="home" href="../index.html" title="Netkiller Linux Web 手札" /><link rel="up" href="../index.html" title="Netkiller Linux Web 手札" /><link rel="prev" href="../nginx/faq.html" title="3.4. FAQ" /><link rel="next" href="server.html" title="4.2. 配置 Tomcat 服务器" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 4 章 Apache Tomcat</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../nginx/faq.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="server.html">下一页</a></td></tr></table><hr /></div><table xmlns="" width="100%" border="0"><tr><td align="left"><a href="http://netkiller.github.io/">Home</a> |
        <a href="http://netkiller.sourceforge.net/">Mirror</a> |
        <a href="/search.html">Search</a></td><td><a href="http://netkiller-github-com.iteye.com/">ITEYE 博客</a> |
        <a href="http://my.oschina.net/neochen/">OSChina 博客</a> |
        <a href="http://rline.blog.51cto.com/">51CTO 博客</a></td><td><form id="searchbox_008589143145807374698:f5uprauilyy" action="/search.html"><input type="hidden" name="cx" value="008589143145807374698:f5uprauilyy" /><input type="hidden" name="cof" value="FORID:11" /><input name="q" type="text" size="25" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(126, 157, 185); border-right-color: rgb(126, 157, 185); border-bottom-color: rgb(126, 157, 185); border-left-color: rgb(126, 157, 185); padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; " /><input type="submit" name="sa" value="Search" /><input name="siteurl" type="hidden" value="http://netkiller.sourceforge.net/" /></form><script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_008589143145807374698%3Af5uprauilyy"></script></td></tr></table><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="index"></a>第 4 章 Apache Tomcat</h1></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="index.html#install">4.1. Tomcat 安装与配置</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#jdk">4.1.1. Tomcat 6</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#idp63706752">4.1.1.1. tomcat-native</a></span></dt></dl></dd><dt><span class="section"><a href="index.html#tomcat7">4.1.2. Tomcat 7</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#idp63709168">4.1.2.1. Server JRE</a></span></dt><dt><span class="section"><a href="index.html#idp63711920">4.1.2.2. Tomcat</a></span></dt></dl></dd><dt><span class="section"><a href="index.html#idp63715552">4.1.3. 防火墙配置</a></span></dt><dt><span class="section"><a href="index.html#idp63722272">4.1.4. 启动脚本</a></span></dt><dt><span class="section"><a href="index.html#idp63726544">4.1.5. 同时运行多实例</a></span></dt><dt><span class="section"><a href="index.html#idp63730880">4.1.6. Testing file</a></span></dt><dt><span class="section"><a href="index.html#mod_jk">4.1.7. mod_jk</a></span></dt><dt><span class="section"><a href="index.html#proxy_ajp">4.1.8. mod_proxy_ajp</a></span></dt><dt><span class="section"><a href="index.html#idp63747952">4.1.9. RewriteEngine 连接 Tomcat</a></span></dt></dl></dd><dt><span class="section"><a href="server.html">4.2. 配置 Tomcat 服务器</a></span></dt><dd><dl><dt><span class="section"><a href="server.html#idp63750752">4.2.1. server.xml</a></span></dt><dd><dl><dt><span class="section"><a href="server.html#connector">4.2.1.1. Connector</a></span></dt><dt><span class="section"><a href="server.html#compression">4.2.1.2. compression</a></span></dt><dt><span class="section"><a href="server.html#idp63758512">4.2.1.3. useBodyEncodingForURI</a></span></dt><dt><span class="section"><a href="server.html#idp63760048">4.2.1.4. HTTPS</a></span></dt><dt><span class="section"><a href="server.html#idp63761920">4.2.1.5. 隐藏Tomcat版本信息</a></span></dt><dt><span class="section"><a href="server.html#idp63764624">4.2.1.6. vhost</a></span></dt><dt><span class="section"><a href="server.html#access_log">4.2.1.7. access_log</a></span></dt></dl></dd><dt><span class="section"><a href="server.html#idp63770080">4.2.2. tomcat-users.xml</a></span></dt><dt><span class="section"><a href="server.html#idp63775712">4.2.3. context.xml</a></span></dt><dt><span class="section"><a href="server.html#idp63778080">4.2.4. logging.properties</a></span></dt></dl></dd><dt><span class="section"><a href="script.html">4.3. Init.d Script</a></span></dt><dd><dl><dt><span class="section"><a href="script.html#idp63781200">4.3.1. Script 1</a></span></dt><dt><span class="section"><a href="script.html#idp63786128">4.3.2. Shell Script 2</a></span></dt></dl></dd></dl></div>
	

	

<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="install"></a>4.1. Tomcat 安装与配置</h2></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="jdk"></a>4.1.1. Tomcat 6</h3></div></div></div>
		
		<p>解压安装</p>
		<pre class="screen">
chmod +x jdk-6u1-linux-i586.bin
./jdk-6u1-linux-i586.bin
输入"yes"回车

mv jdk1.6.0_01 /usr/local/
ln -s /usr/local/jdk1.6.0_01/ /usr/local/java
		</pre>
		<p>/etc/profile.d/java.sh</p>
		<div class="example"><a id="idp63699840"></a><p class="title"><strong>例 4.1. /etc/profile.d/java.sh</strong></p><div class="example-contents">
			
			<pre class="screen">
################################################
### Java environment
################################################
export JAVA_HOME=/usr/local/java
export JRE_HOME=/usr/local/java/jre
export PATH=$PATH:/usr/local/java/bin:/usr/local/java/jre/bin
export CLASSPATH="./:/usr/local/java/lib:/usr/local/java/jre/lib:/usr/local/memcached/api/java"
export JAVA_OPTS="-Xms512m -Xmx1024m"
			</pre>
		</div></div><br class="example-break" />

		<p>下载binary解压到/usr/local/</p>
		<p>下载软件包</p>
		<pre class="screen">
wget http://archive.apache.org/dist/tomcat/tomcat-6/v6.0.13/bin/apache-tomcat-6.0.13.tar.gz
wget http://archive.apache.org/dist/tomcat/tomcat-connectors/native/tomcat-native-1.1.10-src.tar.gz
wget http://archive.apache.org/dist/tomcat/tomcat-connectors/jk/source/jk-1.2.23/tomcat-connectors-1.2.23-src.tar.gz
		</pre>
		<pre class="screen">
tar zxvf apache-tomcat-6.0.13.tar.gz
mv apache-tomcat-6.0.13 /usr/local/
ln -s /usr/local/apache-tomcat-6.0.13/ /usr/local/tomcat
		</pre>

		<p>tomcat-native</p>
		<pre class="screen">
tar zxvf tomcat-native-1.1.10-src.tar.gz
cd tomcat-native-1.1.10-src/jni/native
./configure --with-apr=/usr/local/apache/bin/apr-1-config --with-java-home=/usr/local/java/
make
make install
		</pre>

		<p>catalina.sh</p>
		<pre class="screen">
CATALINA_OPTS="-Djava.library.path=/usr/local/apr/lib"
JAVA_OPTS="-Xss128k -Xms128m -Xmx1024m -XX:PermSize=128M -XX:MaxPermSize=256m -XX:MaxNewSize=256m"
		</pre>
		<p>启动</p>
		<pre class="screen">
startup.sh
		</pre>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp63706752"></a>4.1.1.1. tomcat-native</h4></div></div></div>
			
			<pre class="screen">
			
cd /usr/local/tomcat-6.0.18/bin
tar zxvf tomcat-native.tar.gz
cd tomcat-native-1.1.14-src/jni/native
./configure --with-apr=/usr/local/apr --with-java-home=/usr/java/jdk1.6.0_11
make &amp;&amp; make install
			
			</pre>
		</div>

	</div>

	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="tomcat7"></a>4.1.2. Tomcat 7</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp63709168"></a>4.1.2.1. Server JRE</h4></div></div></div>
			
			<p>安装  Server JRE</p>
			<pre class="screen">
cd /usr/local/src/

tar zxvf server-jre-7u21-linux-x64.gz
mv jdk1.7.0_21 /srv/
ln -s /srv/jdk1.7.0_21 /srv/java
			</pre>
			<p>或者</p>
			<pre class="screen">
curl -sS https://raw.github.com/netkiller/shell/master/java/server-jre.sh | bash
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp63711920"></a>4.1.2.2. Tomcat</h4></div></div></div>
			
			<p>安装下面步骤安装Tomcat，注意不要使用root启动tomcat。这里使用www用户启动tomcat,这样的目的是让tomcat进程继承www用户权限。</p>
			<pre class="screen">
			
cd /usr/local/src/
wget http://ftp.cuhk.edu.hk/pub/packages/apache.org/tomcat/tomcat-7/v7.0.40/bin/apache-tomcat-7.0.40.tar.gz
tar zxvf apache-tomcat-7.0.40.tar.gz

mv apache-tomcat-7.0.40 /srv/
ln -s /srv/apache-tomcat-7.0.40 /srv/apache-tomcat
rm -rf /srv/apache-tomcat/webapps/*

cat &gt; /srv/apache-tomcat/bin/setenv.sh &lt;&lt;'EOF'
export JAVA_HOME=/srv/java
export JAVA_OPTS="-server -Xms512m -Xmx8192m  -XX:PermSize=64M -XX:MaxPermSize=512m"
export CATALINA_HOME=/srv/apache-tomcat
export CLASSPATH=$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$CATALINA_HOME/lib:
export PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$CATALINA_HOME/bin:
EOF

cp /srv/apache-tomcat/conf/server.xml{,.original}

groupadd -g 80 www
adduser -o --home /srv --uid 80 --gid 80 -c "Web Application" www

chown www:www -R /srv/*

su - www -c "/srv/apache-tomcat/bin/startup.sh"
			
			</pre>
			<p>或者运行下面脚本快速安装</p>
			<pre class="screen">
curl -sS https://raw.github.com/netkiller/shell/master/apache/tomcat/install.sh | bash
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp63715552"></a>4.1.3. 防火墙配置</h3></div></div></div>
		
		<pre class="screen">
iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT
		</pre>

		<p>80 跳转 8080 方案</p>
		<pre class="screen">
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080
		</pre>
		<p>取消跳转</p>
		<pre class="screen">
iptables -t nat -D PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080
		</pre>
		<p>查看规则</p>
		<pre class="screen">
iptables -t nat -L
		</pre>
		<div class="example"><a id="idp63719376"></a><p class="title"><strong>例 4.2. tomcat firewall</strong></p><div class="example-contents">
			
			<p>下面是完整的例子，仅供参考，复制到 /etc/sysconfig/iptables 文件中，重启iptables即可生效。</p>
			<pre class="screen">
# cat /etc/sysconfig/iptables
# Generated by iptables-save v1.4.7 on Mon Jul 22 15:58:35 2013
*nat
:PREROUTING ACCEPT [7:847]
:POSTROUTING ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
-A PREROUTING -p tcp -m tcp --dport 80 -j REDIRECT --to-port 8080
COMMIT
# Completed on Mon Jul 22 15:58:35 2013
# Generated by iptables-save v1.4.7 on Mon Jul 22 15:58:35 2013
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [42303:3464247]
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 8080 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
COMMIT
# Completed on Mon Jul 22 15:58:35 2013
			</pre>
		</div></div><br class="example-break" />
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp63722272"></a>4.1.4. 启动脚本</h3></div></div></div>
		
		<div class="example"><a id="idp63723008"></a><p class="title"><strong>例 4.3. /etc/init.d/tomcat</strong></p><div class="example-contents">
			
			<pre class="screen">
			
# cat /etc/init.d/tomcat
#!/bin/bash
# description: Tomcat Start Stop Restart
# processname: tomcat
# chkconfig: 234 20 80

JAVA_HOME=/srv/java
CATALINA_HOME=/srv/apache-tomcat

# Source function library.
. /etc/init.d/functions

# Source networking configuration.
. /etc/sysconfig/network

if [ -f /etc/sysconfig/tomcat ]; then
        . /etc/sysconfig/tomcat
fi

prog=tomcat
lockfile=/var/lock/subsys/$prog
pidfile=${PIDFILE-/var/run/$prog.pid}
lockfile=${LOCKFILE-/var/lock/subsys/$prog}
RETVAL=0
OPTIONS="--pidfile=${pidfile}"

start(){
        # Start daemons.
        echo -n $"Starting $prog: "
        #daemon $prog $OPTIONS
	$CATALINA_HOME/bin/startup.sh
	RETVAL=$?
        echo
	[ $RETVAL -eq 0 ] &amp;&amp; touch $lockfile
	return $RETVAL

}

stop() {
	echo -n $"Stopping $prog: "
#	killproc -p ${pidfile} -d 10 $httpd
	$CATALINA_HOME/bin/shutdown.sh
	RETVAL=$?
	echo
	[ $RETVAL = 0 ] &amp;&amp; rm -f ${lockfile} ${pidfile}
}

case $1 in
    start)
        start
        ;;
    stop)
        stop
        ;;
    restart)
        start
        stop
    ;;
esac
exit 0
			
			</pre>
		</div></div><br class="example-break" />
		<p>创建 /etc/init.d/tomcat 文件，复制并粘贴上面的启动脚本</p>
		<pre class="screen">
vim /etc/init.d/tomcat
chmod +x /etc/init.d/tomcat
chkconfig --add tomcat
chkconfig --level 234 tomcat on
chkconfig --list tomcat
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp63726544"></a>4.1.5. 同时运行多实例</h3></div></div></div>
		
		<p>创建工作目录</p>
		<pre class="screen">
mkdir /srv/apache-tomcat
		</pre>
		<p>每个端口一个目录</p>
		<pre class="screen">
tar zxvf apache-tomcat-7.0.x.tar.gz
mv  apache-tomcat-7.0.x /srv/apache-tomcat/8080

tar zxvf apache-tomcat-7.0.x.tar.gz
mv  apache-tomcat-7.0.x /srv/apache-tomcat/9090
		</pre>
		<p>修改 Server port="8006" 与 Connector port="9090"端口，不要出现重复。</p>
		<pre class="screen">
		

&lt;Server port="8006" shutdown="SHUTDOWN"&gt;


 &lt;Connector port="9090" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" /&gt;

&lt;!--
    &lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /&gt;
--&gt;
		
		</pre>
		<p>启动tomcat然后观察catalina.log日志文件，确认每个进程都正确启动。</p>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp63730880"></a>4.1.6. Testing file</h3></div></div></div>
		
		<p>创建测试文件</p>
		<span class="command"><strong>vim webapps/ROOT/index.jsp</strong></span>
		<pre class="screen">
		
&lt;%@ page contentType="text/html;charset=utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;title&gt;helloworld!&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;
&lt;%="It works!"%&gt;
&lt;/h1&gt;
&lt;%
out.println("&lt;h3&gt;Hello World!&lt;/h3&gt;");
%&gt;
&lt;hr /&gt;
&lt;%=new java.util.Date()%&gt;
&lt;/body&gt;
&lt;/html&gt;
		
		</pre>
		<p>使用curl命令测试，测试结果类似下面结果。</p>
		<pre class="screen">
		
$ curl http://192.168.6.9/index.jsp

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;title&gt;helloworld!&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;
It works!
&lt;/h1&gt;
&lt;h3&gt;Hello World!&lt;/h3&gt;

&lt;hr /&gt;
Mon Jul 22 16:41:46 HKT 2013
&lt;/body&gt;
&lt;/html&gt;
		
		</pre>
	</div>

	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mod_jk"></a>4.1.7. mod_jk</h3></div></div></div>
		
		<p>mod_jk 安装</p>
		<pre class="screen">
tar zxvf tomcat-connectors-1.2.23-src.tar.gz
cd tomcat-connectors-1.2.23-src/native/
./configure --with-apxs=/usr/local/apache/bin/apxs
make
make install
chmod 755 /usr/local/apache/modules/mod_jk.so
		</pre>
		<p>httpd.conf 尾部加入</p>
		<pre class="screen">
Include conf/mod_jk.conf
		</pre>
		<p>配置workers.properties</p>
		<span class="command"><strong>apache/conf/workers.properties</strong></span>
		<pre class="screen">
# Define 1 real worker using ajp13
worker.list=worker1
# Set properties for worker1 (ajp13)
worker.worker1.type=ajp13
worker.worker1.host=127.0.0.1
worker.worker1.port=8009
worker.worker1.lbfactor=1
worker.worker1.cachesize=128
worker.worker1.cache_timeout=600
worker.worker1.socket_keepalive=1
worker.worker1.reclycle_timeout=300
		</pre>

		<p>mod_jk.conf</p>
		<span class="command"><strong>apache/conf/mod_jk.conf</strong></span>
		<pre class="screen">
		
[chenjingfeng@d3010 Includes]$ cat mod_jk.conf
&lt;IfModule mod_jk.c&gt;
# Load mod_jk module
LoadModule jk_module            modules/mod_jk.so
# Where to find workers.properties
JkWorkersFile           /usr/local/apache/conf/workers.properties
# Where to put jk logs
JkLogFile               /usr/local/apache/logs/mod_jk.log
# Set the jk log level [debug/error/info]
JkLogLevel              error
# Select the log format
JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "
# JkOptions indicate to send SSL KEY SIZE,
JkOptions     +ForwardKeySize +ForwardURICompat -ForwardDirectories
# JkRequestLogFormat set the request format
JkRequestLogFormat     "%w %V %T"
JkShmFile     /usr/local/apache2/logs/mod_jk.shm
# Send jsp,servlet for context * to worker named worker1
JkMount  /status/* worker1
JkMount  /*.jsp worker1
JkMount  /*.jsps worker1
JkMount  /*.do worker1
JkMount  /*Servlet worker1
JkMount  /jk/* worker1
&lt;/IfModule&gt;
		
		</pre>
		<p>分别测试apache,tomcat</p>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="proxy_ajp"></a>4.1.8. mod_proxy_ajp</h3></div></div></div>
		
		<p>包含虚拟主机配置文件</p>
		<span class="command"><strong># vi conf/httpd.conf</strong></span>
		<pre class="screen">
# Virtual hosts
Include conf/extra/httpd-vhosts.conf
		</pre>
		<p>虚拟主机中配置ProxyPass,ProxyPassReverse</p>
		<span class="command"><strong># vi conf/extra/httpd-vhosts.conf</strong></span>
		<pre class="screen">
		
&lt;VirtualHost *:80&gt;
    ServerName netkiller.8800.org
    ProxyPass /images !
	ProxyPass /css !
	ProxyPass /js !
    ProxyPass /ajp ajp://localhost:8009/ajp
    ProxyPassReverse /ajp ajp://localhost:8009/ajp
&lt;/VirtualHost&gt;
		
		</pre>
		<p>反向代理和均衡负载模块</p>
		<pre class="screen">
		
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so

ProxyPass /admin balancer://tomcatcluster/admin lbmethod=byrequests stickysession=JSESSIONID nofailover=Off timeout=5 maxattempts=3
ProxyPassReverse /admin balancer://tomcatcluster/admin

&lt;Proxy balancer://tomcatcluster&gt;
	BalancerMember ajp://localhost:8009 route=web1
	BalancerMember ajp://localhost:10009 smax=10 route=web2
	BalancerMember ajp://localhost:11009 route=web3
	BalancerMember ajp://localhost:12009 smax=10 route=web4
&lt;/Proxy&gt;
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp63747952"></a>4.1.9. RewriteEngine 连接 Tomcat</h3></div></div></div>
		
		<pre class="screen">
		
RewriteEngine On

RewriteRule ^/(.*) ajp://localhost:8009/ajp/$1 [P]
RewriteRule ^/(.*\.(jsp|do|sevlet)) ajp://localhost:8009/ajp/$1 [P]
		
		</pre>
	</div>

</div>
	




</div><div xmlns="" id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"><a class="bds_fbook"></a><a class="bds_twi"></a><a class="bds_ms"></a><a class="bds_msn"></a><a class="bds_buzz"></a><a class="bds_linkedin"></a><a class="bds_deli"></a><a class="bds_qzone"></a><a class="bds_qq"></a><a class="bds_tqq"></a><a class="bds_tqf"></a><a class="bds_tsina"></a><a class="bds_baidu"></a><a class="bds_renren"></a><a class="bds_t163"></a><a class="bds_tfh"></a><a class="bds_douban"></a><a class="bds_hi"></a><a class="bds_tieba"></a><a class="bds_tsohu"></a><span class="bds_more"></span><a class="shareCount"></a></div><script xmlns="" type="text/javascript" id="bdshare_js" data="type=tools"></script><script xmlns="" type="text/javascript" id="bdshell_js"></script><script xmlns="" type="text/javascript">
	document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
</script><div xmlns="" id="disqus_thread"></div><script xmlns="" type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

            //if(document.domain == 'netkiller.github.com'){
            var disqus_shortname = 'netkiller'; // required: replace example with your forum shortname
            //}else{
			//var disqus_shortname = 'neochan';
            //}

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript xmlns="">Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a xmlns="" href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><br xmlns="" /><div xmlns="" id="clustrmaps-widget"></div><script xmlns="" type="text/javascript">var _clustrmaps = {'url' : 'http://netkiller.github.io', 'user' : 1107643, 'server' : '2', 'id' : 'clustrmaps-widget', 'version' : 1, 'date' : '2013-08-14', 'lang' : 'en', 'corners' : 'square' };(function (){ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'http://www2.clustrmaps.com/counter/map.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);})();</script><noscript xmlns=""><a href="http://www2.clustrmaps.com/user/87410e6bb"><img src="http://www2.clustrmaps.com/stats/maps-no_clusters/netkiller.github.io-thumb.jpg" alt="Locations of visitors to this page" /></a></noscript><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../nginx/faq.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="server.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">3.4. FAQ </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 4.2. 配置 Tomcat 服务器</td></tr></table></div><script xmlns="" type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11694057-1']);
  _gaq.push(['_setDomainName', 'netkiller.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script xmlns="" type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F997cd4a7320a82d72cb74d179118f697' type='text/javascript'%3E%3C/script%3E"));
</script></body></html>