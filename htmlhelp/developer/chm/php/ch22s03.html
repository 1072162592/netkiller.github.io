<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>22.3. php function check</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="PHP, Python, Perl, Ruby, Java, HTML, XHTML, HTML5, CSS, Javascript, JQuery, C, C++, D"><link rel="home" href="../index.html" title="Netkiller Developer 手札"><link rel="up" href="ch22.html" title="第 22 章 Application"><link rel="prev" href="ch22s02.html" title="22.2. Soap"><link rel="next" href="ch22s04.html" title="22.4.  whois 域名查询"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="22.3. php function check"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="app.fun"></a>22.3. php function check</h2></div></div></div>
		
		<pre class="programlisting">
		
#!/bin/bash
LOGFILE=/tmp/my.log
echo &gt; $LOGFILE
for helper in `ls -1 class/helper/`
do
    echo ========================== $helper ============================ &gt;&gt; $LOGFILE
    class=`grep '^class' class/helper/$helper | awk -F ' ' '{print $2}'`
    for fun in `grep 'public function [a-zA-Z]' class/helper/$helper | awk -F ' ' '{print $3}' | awk -F '(' '{print $1}'`
    do
        count=`grep -r "$class-&gt;$fun(" *|wc -w`
        if [ $count == 0 ]; then
               echo "[ unused ] $class-&gt;$fun" &gt;&gt; $LOGFILE
        else

               echo "[  used  ] $class-&gt;$fun" &gt;&gt; $LOGFILE
        fi
        echo "[`date`] [$helper] $class-&gt;$fun (checked: $count)"
    done
done
		
		</pre>
	</div></body></html>
