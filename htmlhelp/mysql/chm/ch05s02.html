<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>5.2. Table</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="Netkiller MySQL 手札"><link rel="up" href="ch05.html" title="第 5 章 DDL - Data Definition Language"><link rel="prev" href="ch05.html" title="第 5 章 DDL - Data Definition Language"><link rel="next" href="ch05s03.html" title="5.3. Index"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="5.2. Table"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ddl.table"></a>5.2. Table</h2></div></div></div>
		
		<div class="section" title="5.2.1. create table ... select"><div class="titlepage"><div><div><h3 class="title"><a name="idp637168"></a>5.2.1. create table ... select</h3></div></div></div>
			
			<p>创建空表</p>
			<pre class="programlisting">
			
create table admin_user_history select * from admin_user where 1 &lt;&gt; 1;
			
			</pre>
			<p>创建有数据的表</p>
			<pre class="programlisting">
			
create table admin_user_history select * from admin_user;
			
			</pre>
		</div>
		<div class="section" title="5.2.2. modifiy table"><div class="titlepage"><div><div><h3 class="title"><a name="idp639808"></a>5.2.2. modifiy table</h3></div></div></div>
			
			<p>modifiy table</p>
			<pre class="screen">
ALTER TABLE ecs_users add user_picture varchar(255);
			</pre>
		</div>
		<div class="section" title="5.2.3. TEMPORARY Table"><div class="titlepage"><div><div><h3 class="title"><a name="idp641824"></a>5.2.3. TEMPORARY Table</h3></div></div></div>
			
			<p>临时表将在你连接期间存在。一旦断开时将自动删除表并释放所用的空间。你在连接期间删除该表也同样释放空间。</p>
			<pre class="screen">
CREATE TEMPORARY TABLE tmp_table (
	key VARCHAR(10) NOT NULL,
	value INTEGER NOT NULL
)
			</pre>
			<p>声明临时表是一个HEAP表，允许你指定在内存中创建它</p>
			<pre class="screen">
CREATE TEMPORARY TABLE tmp_mem_table (
	key VARCHAR(10) NOT NULL,
	value INTEGER NOT NULL
) TYPE = HEAP
			</pre>
		</div>
		<div class="section" title="5.2.4. Collate"><div class="titlepage"><div><div><h3 class="title"><a name="idp644784"></a>5.2.4. Collate</h3></div></div></div>
			
			<pre class="programlisting">
ALTER TABLE `tmp_cats`  COLLATE='utf8_general_ci',  CONVERT TO CHARSET utf8;
			</pre>
		</div>
		<div class="section" title="5.2.5. CHARACTER"><div class="titlepage"><div><div><h3 class="title"><a name="idp646160"></a>5.2.5. CHARACTER</h3></div></div></div>
			
			<pre class="screen">
			
ALTER TABLE &lt;table_name&gt; CONVERT TO CHARACTER SET utf8;
			
			</pre>
		</div>
		<div class="section" title="5.2.6. DEFAULT"><div class="titlepage"><div><div><h3 class="title"><a name="idp647696"></a>5.2.6. DEFAULT</h3></div></div></div>
			
			<p>更新时间</p>
			<p>`mtime` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更改时间',</p>
			<pre class="screen">
			
CREATE TABLE `bank_account` (
	`id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '自增唯一ID',
	`bank_name` VARCHAR(255) NOT NULL DEFAULT '0' COMMENT '银行名字(Bank Name)',
	`name` VARCHAR(50) NOT NULL DEFAULT '0' COMMENT '帐号名称(Name on account)',
	`account_number` VARCHAR(50) NOT NULL DEFAULT '0' COMMENT '银行帐号(Account Number)',
	`branch_location` VARCHAR(255) NOT NULL DEFAULT '0' COMMENT '支行位置(Branch Location)',
	`description` VARCHAR(255) NOT NULL DEFAULT '0' COMMENT '银行描述',
	`status` ENUM('Y','N') NOT NULL DEFAULT 'N' COMMENT '银行帐号状态',
	`ctime` DATETIME NOT NULL COMMENT '创建时间',
	`mtime` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更改时间',
	PRIMARY KEY (`id`)
)
COMMENT='银行帐号'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=2;
			
			</pre>
		</div>
		<div class="section" title="5.2.7. KEY"><div class="titlepage"><div><div><h3 class="title"><a name="ddl.key"></a>5.2.7. KEY</h3></div></div></div>
			
			<div class="section" title="5.2.7.1. PRIMARY KEY"><div class="titlepage"><div><div><h4 class="title"><a name="idp651824"></a>5.2.7.1. PRIMARY KEY</h4></div></div></div>
				
				<p>一般主键定义</p>
				<pre class="screen">
PRIMARY KEY (`id`),
				</pre>
				<p>复合主键</p>
				<pre class="screen">
PRIMARY KEY (`id`, `user_id`),
				</pre>
			</div>

		</div>
		<div class="section" title="5.2.8. COMMENT"><div class="titlepage"><div><div><h3 class="title"><a name="idp654688"></a>5.2.8. COMMENT</h3></div></div></div>
			
			<pre class="screen">
ALTER TABLE `neo`.`stuff` COMMENT = '用户表' ;
ALTER TABLE `neo`.`stuff` CHANGE COLUMN `name` `name` VARCHAR(50) NULL DEFAULT NULL COMMENT '姓名'  ;
ALTER TABLE `neo`.`stuff` CHANGE COLUMN `password` `password` VARCHAR(50) NULL DEFAULT NULL COMMENT '用户密码' ;


CREATE TABLE `stuff` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL COMMENT ''姓名'',
  `password` varchar(50) DEFAULT NULL COMMENT ''用户密码'',
  `created` date NOT NULL DEFAULT ''0000-00-00'',
  PRIMARY KEY (`id`,`created`)
) ENGINE=MyISAM AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 COMMENT=''用户表''
/*!50100 PARTITION BY HASH (year(created))
PARTITIONS 10 */
			</pre>
		</div>
	</div></body></html>
