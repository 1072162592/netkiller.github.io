<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>1.6. Security</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="Netkiller MySQL 手札"><link rel="up" href="ch01.html" title="第 1 章 MySQL Server"><link rel="prev" href="ch01s05.html" title="1.5. MySQL Proxy"><link rel="next" href="ch01s07.html" title="1.7. Monitoring"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="1.6. Security"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="security"></a>1.6. Security</h2></div></div></div>
	
	<div class="section" title="1.6.1. Firewall"><div class="titlepage"><div><div><h3 class="title"><a name="firewall"></a>1.6.1. Firewall</h3></div></div></div>
		
		<p>iptables</p>
		<pre class="screen">
iptables -A INPUT -i eth0 -p tcp -s xxx.xxx.xxx.xxx --dport 3306 -j ACCEPT
		</pre>
	</div>
	<div class="section" title="1.6.2. 保护表字段"><div class="titlepage"><div><div><h3 class="title"><a name="idp396992"></a>1.6.2. 保护表字段</h3></div></div></div>
		
		<p>通过触发器，使之无法修改某些字段的数据，同时不影响修改其他字段。</p>
		<pre class="screen">
DROP TRIGGER IF EXISTS `members`;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='';
DELIMITER //
CREATE TRIGGER `members` BEFORE UPDATE ON `members` FOR EACH ROW BEGIN
	set new.name 		= old.name;
	set new.cellphone 	= old.cellphone;
	set new.email 		= old.email;
    set new.password 	= old.password;
END//
DELIMITER ;
SET SQL_MODE=@OLD_SQL_MODE;
		</pre>
	</div>
</div></body></html>
