<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>6.3. returning</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="Netkiller PostgreSQL 手札"><link rel="up" href="ch06.html" title="第 6 章 SQL"><link rel="prev" href="ch06s02.html" title="6.2. 递归查询"><link rel="next" href="ch06s04.html" title="6.4. Function"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="6.3. returning"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="returning"></a>6.3. returning</h2></div></div></div>
		
		<div class="example"><a name="idp366736"></a><p class="title"><b>例 6.3. PostgreSQL insert returning</b></p><div class="example-contents">
			
			<pre class="screen">
test=# create table account(id serial,name varchar,pass varchar);
NOTICE:  CREATE TABLE will create implicit sequence "account_id_seq" for serial column "account.id"
CREATE TABLE
test=# insert into account(name,pass) values('neo','chen') returning id;
 id
----
  1
(1 row)

INSERT 0 1
			</pre>
			<p>returning p1,p2...</p>
			<pre class="screen">
test=# insert into account(name,pass) values('jam','123'),('john','456') returning id, name;
 id | name
----+------
  2 | jam
  3 | john
(2 rows)

INSERT 0 2
			</pre>
			<p>returning *</p>
			<pre class="screen">
test=# insert into account(name,pass) values('sam',md5('123')),('ivan',md5('456')),('lily',md5('789')) returning *;
 id | name |               pass
----+------+----------------------------------
  4 | sam  | 202cb962ac59075b964b07152d234b70
  5 | ivan | 250cf8b51c773f3f8dc8b4be867a9a02
  6 | lily | 68053af2923e00204c3ca7c6a3150cf7
(3 rows)

INSERT 0 3
			</pre>
		</div></div><br class="example-break">
		<div class="example"><a name="idp370544"></a><p class="title"><b>例 6.4. PostgreSQL update returning</b></p><div class="example-contents">
			
			<pre class="screen">
test=# update account set pass = md5(pass) where id=3 returning id,pass;
 id |               pass
----+----------------------------------
  3 | 250cf8b51c773f3f8dc8b4be867a9a02
(1 row)

UPDATE 1
			</pre>
			<pre class="screen">
			
test=# update account set pass = md5(pass) where id &lt; 3 returning *;
 id | name |               pass
----+------+----------------------------------
  1 | neo  | a1a8887793acfc199182a649e905daab
  2 | jam  | 202cb962ac59075b964b07152d234b70
(2 rows)

UPDATE 2
			
			</pre>
		</div></div><br class="example-break">
		<div class="example"><a name="idp372576"></a><p class="title"><b>例 6.5. PostgreSQL delete returning</b></p><div class="example-contents">
			
			<pre class="screen">
test=# delete from account where id=6 returning id,name;
 id | name
----+------
  6 | lily
(1 row)

DELETE 1
			</pre>
			<pre class="screen">
			
test=# delete from account where id&lt;6 returning *;
 id | name |               pass
----+------+----------------------------------
  4 | sam  | 202cb962ac59075b964b07152d234b70
  5 | ivan | 250cf8b51c773f3f8dc8b4be867a9a02
  3 | john | 250cf8b51c773f3f8dc8b4be867a9a02
  1 | neo  | a1a8887793acfc199182a649e905daab
  2 | jam  | 202cb962ac59075b964b07152d234b70
(5 rows)

DELETE 5
			
			</pre>
		</div></div><br class="example-break">
	</div></body></html>
