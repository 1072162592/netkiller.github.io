<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>47.6. 中文分词</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="MySQL, PostgreSQL, Oracle, NoSQL, ER, TokyoCabinet/Tyrant, Memcache, Membase, Redis, Flare, Voldemort, LevelDB, MongoDB, GreenSQL, RDBMS, ORDBMS"><link rel="home" href="../index.html" title="Netkiller Database 手札"><link rel="up" href="ch47.html" title="第 47 章 Solr"><link rel="prev" href="ch47s05.html" title="47.5. multicore"><link rel="next" href="ch48.html" title="第 48 章 Nutch"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="47.6. 中文分词"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1868496"></a>47.6. 中文分词</h2></div></div></div>
		
		<div class="section" title="47.6.1. ChineseTokenizerFactory"><div class="titlepage"><div><div><h3 class="title"><a name="idp1869600"></a>47.6.1. ChineseTokenizerFactory</h3></div></div></div>
			
			<pre class="screen">
			
&lt;fieldType name="text" class="solr.TextField" &gt;
    &lt;analyzer&gt;
        &lt;tokenizer class="org.apache.solr.analysis.ChineseTokenizerFactory"/&gt;
    &lt;/analyzer&gt;
&lt;/fieldType&gt;
			
			</pre>
		</div>

		<div class="section" title="47.6.2. CJK"><div class="titlepage"><div><div><h3 class="title"><a name="idp1871040"></a>47.6.2. CJK</h3></div></div></div>
			
			<pre class="screen">
			
&lt;fieldType name="text" class="solr.TextField" positionIncrementGap="100"&gt;
	&lt;analyzer&gt;
    	&lt;tokenizer class="solr.CJKTokenizerFactory"/&gt;
	&lt;/analyzer&gt;
&lt;/fieldType&gt;
			
			</pre>
		</div>

		<div class="section" title="47.6.3. mmseg4j"><div class="titlepage"><div><div><h3 class="title"><a name="idp1872512"></a>47.6.3. mmseg4j</h3></div></div></div>
			
			<p>http://code.google.com/p/mmseg4j/</p>
			<p>install</p>
			<pre class="screen">
			
$ cd /usr/local/src/
$ wget http://mmseg4j.googlecode.com/files/mmseg4j-1.7.2.zip
$ unzip mmseg4j-1.7.2.zip
$ mkdir /usr/local/apache-solr/example/multicore/lib
$ cp /usr/local/src/mmseg4j-1.7.2/mmseg4j-all-1.7.2.jar /usr/local/apache-solr/example/multicore/lib
$ cd mmseg4j-1.7.2/
			
			</pre>
			<p>test</p>
			<pre class="screen">
$ java -Dmmseg.dic.path=/usr/local/apache-solr/example/solr -jar mmseg4j-all-1.7.2.jar 这里是字符串
$ java -Dmmseg.dic.path=/usr/local/apache-solr/example/solr -cp .:mmseg4j-all-1.7.2.jar com.chenlb.mmseg4j.example.Simple 这里是字符串
$ java -Dmmseg.dic.path=/usr/local/apache-solr/example/solr -cp .:mmseg4j-all-1.7.2.jar com.chenlb.mmseg4j.example.MaxWord 这里是字符串
			</pre>
			<p>mmseg4j 在 solr 中主要支持两个参数：mode、dicPath。mode 表示是什么模式分词（有效值：simplex、complex、max-word，如果输入了无效的默认用 max-word。）。dicPath 是词库目录可以是绝对目录，也可以是相对目录（是相对 solr.home 目录下的，dic 就会在 solr.home/dic 目录下找词库文件），如果不指定就是默认在 CWD/data 目录（程序运行当前目录的data子目录）下找。</p>
			<p>分词例子</p>
			<pre class="screen">
			
&lt;fieldtype name="textComplex" class="solr.TextField"&gt;
	&lt;analyzer&gt;
		&lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory"
			mode="complex" dicPath="dic"&gt;
		&lt;/tokenizer&gt;
	&lt;/analyzer&gt;
&lt;/fieldtype&gt;

&lt;fieldtype name="textMaxWord" class="solr.TextField"&gt;
	&lt;analyzer&gt;
		&lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory"
			mode="max-word" dicPath="dic"&gt;
		&lt;/tokenizer&gt;
	&lt;/analyzer&gt;
&lt;/fieldtype&gt;

&lt;fieldtype name="textSimple" class="solr.TextField"&gt;
	&lt;analyzer&gt;
		&lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory"
			mode="simple" dicPath="/usr/local/apache-solr/example/solr/my_dic"&gt;
		&lt;/tokenizer&gt;
	&lt;/analyzer&gt;
&lt;/fieldtype&gt;
			
			</pre>
			<p>添加到schema.xml</p>
			<pre class="screen">
			
&lt;fieldType name="text" class="solr.TextField" positionIncrementGap="100" &gt;
    &lt;analyzer&gt;
        &lt;tokenizer class="com.chenlb.mmseg4j.solr.MMSegTokenizerFactory" mode="complex" dicPath="dic"/&gt;
        &lt;filter class="solr.LowerCaseFilterFactory"/&gt;
    &lt;/analyzer&gt;
&lt;/fieldType&gt;
			
			</pre>
			<p>http://localhost:8080/solr/admin/analysis.jsp 在 Field 的下拉菜单选择 name，然后在应用输入 complex。可以看 mmseg4j 的分词的结果.</p>
		</div>
		<div class="section" title="47.6.4. 中文分词“庖丁解牛” Paoding Analysis"><div class="titlepage"><div><div><h3 class="title"><a name="idp1872800"></a>47.6.4. 中文分词“庖丁解牛” Paoding Analysis</h3></div></div></div>
			
			<pre class="screen">
$ cd /usr/local/src/
$ mkdir paoding-analysis-2.0.4-beta
$ cd paoding-analysis-2.0.4-beta/
$ wget http://paoding.googlecode.com/files/paoding-analysis-2.0.4-beta.zip
$ unzip paoding-analysis-2.0.4-beta.zip
$ cp paoding-analysis.jar /usr/local/apache-solr/example/multicore/lib/
			</pre>
			<p>ChineseTokenizerFactory</p>
			<pre class="screen">
			</pre>
		</div>
	</div></body></html>
