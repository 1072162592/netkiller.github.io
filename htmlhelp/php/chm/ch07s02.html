<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>7.2. PHP Memcache</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="php, pear, pecl, phar"><link rel="home" href="index.html" title="Netkiller PHP 手札"><link rel="up" href="ch07.html" title="第 7 章 PECL :: The PHP Extension Community Library"><link rel="prev" href="ch07.html" title="第 7 章 PECL :: The PHP Extension Community Library"><link rel="next" href="ch07s03.html" title="7.3. php5-gd - GD module for php5"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="7.2. PHP Memcache"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="extensions.memcache"></a>7.2. PHP Memcache</h2></div></div></div>
		
		<p><a class="link" href="">参考PHP安装</a></p>
		<div class="section" title="7.2.1. pecl"><div class="titlepage"><div><div><h3 class="title"><a name="idp287280"></a>7.2.1. pecl</h3></div></div></div>
			
			<p>进入PHP工作目录</p>
			<pre class="screen">
cd /usr/local/php/
			</pre>
			<p>安装 memcache</p>
			<p>pecl install</p>
			<pre class="screen">
bin/pecl install memcache
			</pre>
			<p>php.ini</p>
			<pre class="screen">
			
vi etc/php.ini

extension_dir = "/usr/local/php-5.3.3/lib/php/extensions/"
extension = memcache.so
			
			</pre>
			<p>php.ini memcache 参数</p>
			<pre class="screen">
			
cat &gt;&gt; /usr/local/php/etc/php.ini &lt;&lt;EOF
[memcache]
memcache.allow_failover = 1
memcache.max_failover_attempts=20
memcache.chunk_size =8192
memcache.default_port = 11211
memcache.default_timeout_ms=30
EOF
			
			</pre>
		</div>
		<div class="section" title="7.2.2. apt-get"><div class="titlepage"><div><div><h3 class="title"><a name="php5-memcache"></a>7.2.2. apt-get</h3></div></div></div>
			
			<pre class="screen">
$ sudo apt-get install php5-memcache
			</pre>
			<p>memcache.ini 文件</p>
			<pre class="screen">
$ cat /etc/php5/conf.d/memcache.ini
; uncomment the next line to enable the module
extension=memcache.so

[memcache]
memcache.dbpath="/var/lib/memcache"
memcache.maxreclevel=0
memcache.maxfiles=0
memcache.archivememlim=0
memcache.maxfilesize=0
memcache.maxratio=0
			</pre>
		</div>
		<div class="section" title="7.2.3. example"><div class="titlepage"><div><div><h3 class="title"><a name="idp295104"></a>7.2.3. example</h3></div></div></div>
			
			<div class="example"><a name="idp295744"></a><p class="title"><b>例 7.2. memcache.php</b></p><div class="example-contents">
				
				<pre class="screen">
				
&lt;?php
	$memcache = new Memcache;
	$memcache-&gt;connect('localhost', 11211) or die ("Could not connect");

	$memcache-&gt;set('var_key', 'some really big variable', MEMCACHE_COMPRESSED, 50);
	echo $memcache-&gt;get('var_key');
?&gt;
				
				</pre>
				<p>运行测试脚本</p>
				<pre class="screen">
php -q memcache.php
				</pre>
			</div></div><br class="example-break">
		</div>
	</div></body></html>
