<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第 13 章 FAQ</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="php, pear, pecl, phar"><link rel="home" href="index.html" title="Netkiller PHP 手札"><link rel="up" href="index.html" title="Netkiller PHP 手札"><link rel="prev" href="ch12.html" title="第 12 章 Debug"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" title="第 13 章 FAQ"><div class="titlepage"><div><div><h2 class="title"><a name="faq"></a>第 13 章 FAQ</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl><dt><span class="section"><a href="ch13.html#curl.error">13.1. Error in TLS handshake, trying SSLv3...</a></span></dt></dl></div>
	
	<div class="section" title="13.1. Error in TLS handshake, trying SSLv3..."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="curl.error"></a>13.1. Error in TLS handshake, trying SSLv3...</h2></div></div></div>
		
		<pre class="screen">
* Initializing NSS with certpath: sql:/etc/pki/nssdb
* NSS error -12286
* Error in TLS handshake, trying SSLv3...
		</pre>
		<p>重新编译curl，同时禁用NSS</p>
		<pre class="screen">
		
wget http://curl.haxx.se/download/curl-7.28.1.tar.gz
tar zxvf curl-7.28.1.tar.gz
cd curl-7.28.1
./configure --prefix=/srv/curl-7.28.1/ --without-nss --with-ssl &amp;&amp; make &amp;&amp;make install
		
		</pre>
		<p>编译PHP，同时指定curl目录</p>
		<pre class="screen">
		
./configure --prefix=/srv/php-5.2.17 \
--with-config-file-path=/srv/php-5.2.17/etc \
--with-config-file-scan-dir=/srv/php-5.2.17/etc/conf.d \
--with-libdir=lib64 \
--enable-fastcgi \
--enable-fpm \
--with-pear \
--with-curl=/srv/curl-7.28.1 \
--with-gd=shared \
--with-jpeg-dir=shared \
--with-png-dir=shared \
--with-freetype-dir=shared \
--with-zlib-dir \
--with-iconv=shared \
--with-mcrypt \
--with-mysql \
--with-pdo-mysql \
--with-mysql-sock=/var/lib/mysql/mysql.sock \
--with-openssl=shared \
--with-mhash=shared \
--with-sqlite=shared \
--with-pdo-sqlite=shared \
--with-xsl=shared \
--with-pear \
--enable-sockets \
--enable-soap \
--enable-mbstring \
--enable-magic-quotes \
--enable-inline-optimization \
--enable-gd-native-ttf \
--enable-zip \
--enable-xml \
--enable-ftp \
--enable-bcmath \
--enable-calendar \
--enable-sqlite-utf8 \
--enable-shmop \
--enable-dba \
--enable-wddx \
--enable-sysvsem \
--enable-sysvshm \
--enable-sysvmsg \
--disable-debug
		
		</pre>
		<p>解决后</p>
		<pre class="screen">
* successfully set certificate verify locations:
*   CAfile: /etc/pki/tls/certs/ca-bundle.crt
  CApath: none
* SSL connection using DHE-RSA-AES256-SHA
		</pre>
	</div>
</div></body></html>
