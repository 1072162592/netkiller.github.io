<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 11. OpenPGP/OpenGPG(GnuPG)</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="md5sum, openssl, openpgp, opengpg, md5, sha1, des, rsa, uuid, base64, quoted-printable, uuencode, x509,smime"><link rel="home" href="../index.html" title="Netkiller Cryptography 手札"><link rel="up" href="../index.html" title="Netkiller Cryptography 手札"><link rel="prev" href="../ch10s04.html" title="10.4. sha1sum"><link rel="next" href="ch11s02.html" title="11.2. GnuPG For Windows"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" title="Chapter 11. OpenPGP/OpenGPG(GnuPG)"><div class="titlepage"><div><div><h2 class="title"><a name="index"></a>Chapter 11. OpenPGP/OpenGPG(GnuPG)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch11.html#GnuPG">11.1. GnuPG</a></span></dt><dd><dl><dt><span class="section"><a href="ch11.html#idp378624">11.1.1. Creating a key (创建key) </a></span></dt><dt><span class="section"><a href="ch11.html#idp382928">11.1.2. Exporting keys (导出key)</a></span></dt><dd><dl><dt><span class="section"><a href="ch11.html#idp383600">11.1.2.1. --export                  export keys</a></span></dt><dt><span class="section"><a href="ch11.html#idp385392">11.1.2.2. -o, --output                  use as output file</a></span></dt></dl></dd><dt><span class="section"><a href="ch11.html#idp386864">11.1.3. Importing keys (导入key)</a></span></dt><dt><span class="section"><a href="ch11.html#idp389168">11.1.4. Revoke a key (吊销key)</a></span></dt></dl></dd><dt><span class="section"><a href="ch11s02.html">11.2. GnuPG For Windows</a></span></dt><dd><dl><dt><span class="section"><a href="ch11s02.html#idp392960">11.2.1. 生成密钥对</a></span></dt><dt><span class="section"><a href="ch11s02.html#idp397424">11.2.2. 列出密钥</a></span></dt><dt><span class="section"><a href="ch11s02.html#idp402320">11.2.3. 验证签字</a></span></dt></dl></dd><dt><span class="section"><a href="ch11s03.html">11.3. EMail-Security</a></span></dt><dt><span class="section"><a href="ch11s04.html">11.4. Smart Card</a></span></dt><dt><span class="section"><a href="ch11s05.html">11.5. 例子</a></span></dt><dd><dl><dt><span class="section"><a href="ch11s05.html#idp410432">11.5.1. 加密文件</a></span></dt></dl></dd></dl></div>
	
	<p>下载PGP: http://www.pgp.com/</p>
	<p>下载OpenPGP: http://www.pgpi.org/</p>
	<div class="section" title="11.1. GnuPG"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GnuPG"></a>11.1. GnuPG</h2></div></div></div>
		
		<p>GnuPG</p>
		<pre class="screen">
~/.gnupg/gpg.conf 	 – 配置文件
~/.gnupg/trustdb.gpg – 信任库
~/.gnupg/pubring.gpg – 公钥库
~/.gnupg/secring.gpg – 私钥库
		</pre>
		<div class="section" title="11.1.1. Creating a key (创建key)"><div class="titlepage"><div><div><h3 class="title"><a name="idp378624"></a>11.1.1. Creating a key (创建key) </h3></div><div><h4 class="subtitle">--gen-key                 generate a new key pair</h4></div></div></div>
			
			
			<pre class="screen">
			
neo@neo-laptop:~$ gpg --gen-key
gpg (GnuPG) 1.4.11; Copyright (C) 2010 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection?
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048)
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 1y
Key expires at Tuesday, October 22, 2013 PM03:25:35 HKT
Is this correct? (y/N) y

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    "Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"

Real name: Neo Chan
Email address: 324@example.com
Comment: Office Email
You selected this USER-ID:
    "Neo Chan (Office Email) &lt;324@example.com&gt;"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key.

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 282 more bytes)
.......+++++
.......+++++
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
..+++++
..+++++
gpg: key CEF09301 marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
gpg: next trustdb check due at 2013-10-22
pub   2048R/CEF09301 2012-10-22 [expires: 2013-10-22]
      Key fingerprint = C5B7 50EF 762F 3F7F 1AE5  8AEC AF10 D50D CEF0 9301
uid                  Neo Chan (Office Email) &lt;324@example.com&gt;
sub   2048R/0BF4D523 2012-10-22 [expires: 2013-10-22]
			
			</pre>
		</div>
		<div class="section" title="11.1.2. Exporting keys (导出key)"><div class="titlepage"><div><div><h3 class="title"><a name="idp382928"></a>11.1.2. Exporting keys (导出key)</h3></div></div></div>
			
			<div class="section" title="11.1.2.1. --export export keys"><div class="titlepage"><div><div><h4 class="title"><a name="idp383600"></a>11.1.2.1. --export                  export keys</h4></div></div></div>
				
				<p></p>
				<pre class="screen">
				
gpg --export -a
				
				</pre>
			</div>
			<div class="section" title="11.1.2.2. -o, --output use as output file"><div class="titlepage"><div><div><h4 class="title"><a name="idp385392"></a>11.1.2.2. -o, --output                  use as output file</h4></div></div></div>
				
				<pre class="screen">
				
$ gpg --export -a -o test.asc
$ gpg --output yourname.asc --export -a
				
				</pre>
			</div>
		</div>
		<div class="section" title="11.1.3. Importing keys (导入key)"><div class="titlepage"><div><div><h3 class="title"><a name="idp386864"></a>11.1.3. Importing keys (导入key)</h3></div><div><h4 class="subtitle">--import                  import/merge keys</h4></div></div></div>
			
			
			<p></p>
			<pre class="screen">
			
neo@neo-laptop:~$ gpg --import 409.asc
gpg: key 4D3A0803: public key "Phoenix.L &lt;409@example.com&gt;" imported
gpg: key CEF09301: "Neo Chan (Office Email) &lt;324@example.com&gt;" not changed
gpg: Total number processed: 2
gpg:               imported: 1  (RSA: 1)
gpg:              unchanged: 1

			
			</pre>
		</div>
		<div class="section" title="11.1.4. Revoke a key (吊销key)"><div class="titlepage"><div><div><h3 class="title"><a name="idp389168"></a>11.1.4. Revoke a key (吊销key)</h3></div></div></div>
			
			<pre class="screen">
			
gpg --gen-revoke
			
			</pre>
		</div>
	</div>

	
	
	
	
</div></body></html>
