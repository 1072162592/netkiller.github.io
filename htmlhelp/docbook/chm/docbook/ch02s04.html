<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>2.4. PDF</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="docbook, latex, epub"><link rel="home" href="../index.html" title="Netkiller Docbook 手札"><link rel="up" href="ch02.html" title="第 2 章 Document Tools"><link rel="prev" href="ch02s03.html" title="2.3. XML 校验"><link rel="next" href="ch02s05.html" title="2.5. CHM"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="2.4. PDF"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docbook.pdf"></a>2.4. PDF</h2></div></div></div>
		
		<pre class="screen">
sudo apt-get install docbook-xml docbook-xsl xsltproc fop
		</pre>
		<p>安装字体</p>
		<pre class="screen">
sudo mkdir /usr/share/fonts/microsoft
		</pre>
		<p>将 C:\Windows\Fonts 目录中的字体复制到 /usr/share/fonts/microsoft </p>
		<pre class="screen">
$ java -cp /usr/share/java/fop.jar  org.apache.fop.fonts.apps.TTFReader /usr/share/fonts/microsoft/simhei.ttf simhei.xml
$ java -cp /usr/share/java/fop.jar  org.apache.fop.fonts.apps.TTFReader -ttcname "SimSun" /usr/share/fonts/microsoft/simsun.ttc simsun.xml
		</pre>

		<pre class="screen">
		
sudo vim /usr/share/xml/docbook/stylesheet/docbook-xsl/fo/param.xsl
&lt;xsl:param name="callout.unicode.font"&gt;simsun&lt;/xsl:param&gt;
&lt;xsl:param name="symbol.font.family"&gt;simsun&lt;/xsl:param&gt;
&lt;xsl:param name="callout.unicode.font"&gt;simsun&lt;/xsl:param&gt;
		
		</pre>
		
		 <pre class="screen">
		 
$ vim fop.conf

&lt;?xml version="1.0"?&gt;
&lt;fop version="1.0"&gt;
&lt;base&gt;.&lt;/base&gt;

&lt;renderers&gt;
	&lt;renderer mime="application/pdf"&gt;
     &lt;filterList&gt;
         &lt;value&gt;flate&lt;/value&gt;
     &lt;/filterList&gt;
      &lt;fonts&gt;
        &lt;font metrics-url="simhei.xml" kerning="yes" embed-url="/usr/share/fonts/microsoft/simhei.ttf"&gt;
          &lt;font-triplet name="simhei" style="normal" weight="normal"/&gt;
          &lt;font-triplet name="simhei" style="normal" weight="bold"/&gt;
          &lt;font-triplet name="simhei" style="italic" weight="normal"/&gt;
          &lt;font-triplet name="simhei" style="italic" weight="bold"/&gt;
          &lt;/font&gt;
          &lt;font metrics-url="simsun.xml" kerning="yes" embed-url="/usr/share/fonts/microsoft/simsun.ttc"&gt;
          &lt;font-triplet name="simsun" style="normal" weight="normal"/&gt;
          &lt;font-triplet name="simsun" style="normal" weight="bold"/&gt;
          &lt;font-triplet name="simsun" style="italic" weight="normal"/&gt;
          &lt;font-triplet name="simsun" style="italic" weight="bold"/&gt;
          &lt;/font&gt;
        &lt;/fonts&gt;
    &lt;/renderer&gt;
&lt;/renderers&gt;
&lt;/fop&gt;
		 
		 </pre>
		<pre class="screen">
xsltproc -o helloworld.fo /usr/share/xml/docbook/stylesheet/docbook-xsl/fo/docbook.xsl helloworld.xml
fop -c fop.conf helloworld.fo -pdf helloworld.pdf
		</pre>
	</div></body></html>
