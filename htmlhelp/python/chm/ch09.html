<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第 9 章 Library</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="keywords" content="php, pear, pecl, phar"><link rel="home" href="index.html" title="Netkiller Python 手札"><link rel="up" href="index.html" title="Netkiller Python 手札"><link rel="prev" href="ch08s03.html" title="8.3. Pylons"><link rel="next" href="ch09s02.html" title="9.2. syslog"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" title="第 9 章 Library"><div class="titlepage"><div><div><h2 class="title"><a name="python.library"></a>第 9 章 Library</h2></div></div></div><div class="toc"><p><b>目录</b></p><dl><dt><span class="section"><a href="ch09.html#threading">9.1. threading</a></span></dt><dt><span class="section"><a href="ch09s02.html">9.2. syslog</a></span></dt><dd><dl><dt><span class="section"><a href="ch09s02.html#syslog.udp">9.2.1. udp client</a></span></dt><dt><span class="section"><a href="ch09s02.html#idp283072">9.2.2. udp server</a></span></dt></dl></dd><dt><span class="section"><a href="ch09s03.html">9.3. Socket</a></span></dt><dd><dl><dt><span class="section"><a href="ch09s03.html#idp288272">9.3.1. UDP</a></span></dt><dd><dl><dt><span class="section"><a href="ch09s03.html#idp289072">9.3.1.1. UDP Server</a></span></dt><dt><span class="section"><a href="ch09s03.html#idp291680">9.3.1.2. UDP Clinet</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="ch09s04.html">9.4. Daemon</a></span></dt><dt><span class="section"><a href="ch09s05.html">9.5. python-memcached</a></span></dt><dt><span class="section"><a href="ch09s06.html">9.6. Pyro - Pyro is short for PYthon Remote Objects</a></span></dt><dt><span class="section"><a href="ch09s07.html">9.7. Python Imaging Library</a></span></dt><dt><span class="section"><a href="ch09s08.html">9.8. getopt – Command line option parsing</a></span></dt><dt><span class="section"><a href="ch09s09.html">9.9. syslog</a></span></dt><dd><dl><dt><span class="section"><a href="ch09s09.html#syslog.udp">9.9.1. udp client</a></span></dt><dt><span class="section"><a href="ch09s09.html#idp328000">9.9.2. udp server</a></span></dt></dl></dd><dt><span class="section"><a href="ch09s10.html">9.10. python-subversion</a></span></dt><dt><span class="section"><a href="ch09s11.html">9.11. SimpleHTTPServer</a></span></dt><dt><span class="section"><a href="ch09s12.html">9.12. fuse-python.x86_64 : Python bindings for FUSE - filesystem in userspace</a></span></dt><dt><span class="section"><a href="ch09s13.html">9.13. Network</a></span></dt><dd><dl><dt><span class="section"><a href="ch09s13.html#gevent">9.13.1. gevent - A coroutine-based network library for Python</a></span></dt></dl></dd><dt><span class="section"><a href="ch09s14.html">9.14. TUI</a></span></dt><dd><dl><dt><span class="section"><a href="ch09s14.html#console">9.14.1. Console</a></span></dt><dt><span class="section"><a href="ch09s14.html#idp347472">9.14.2. urwid</a></span></dt><dt><span class="section"><a href="ch09s14.html#idp348864">9.14.3. pycdk</a></span></dt><dt><span class="section"><a href="ch09s14.html#idp350368">9.14.4. python-newt - A NEWT module for Python</a></span></dt></dl></dd></dl></div>
	
	
<div class="section" title="9.1. threading"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="threading"></a>9.1. threading</h2></div></div></div>
	
	<pre class="screen">
import threading  
class MyThread(threading.Thread):  
    def __init__(self, name=None):  
        threading.Thread.__init__(self)  
        self.name = name  
      
    def run(self):  
        print self.name  
  
def test():  
    for i in range(0, 100):  
        t = MyThread("thread_" + str(i))  
        t.start()  
  
if __name__=='__main__':  
    test()  	
	</pre>	
	<p>ref: http://www.ibm.com/developerworks/aix/library/au-threadingpython/</p>
	<pre class="screen">
	
 #!/usr/bin/env python
import Queue
import threading
import urllib2
import time

hosts = ["http://yahoo.com", "http://google.com", "http://amazon.com",
"http://ibm.com", "http://apple.com"]

queue = Queue.Queue()

class ThreadUrl(threading.Thread):
	"""Threaded Url Grab"""
	def __init__(self, queue):
	  threading.Thread.__init__(self)
	  self.queue = queue

	def run(self):
	  while True:
		#grabs host from queue
		host = self.queue.get()

		#grabs urls of hosts and prints first 1024 bytes of page
		url = urllib2.urlopen(host)
		print url.read(1024)

		#signals to queue job is done
		self.queue.task_done()

start = time.time()
def main():

#spawn a pool of threads, and pass them queue instance 
for i in range(5):
  t = ThreadUrl(queue)
  t.setDaemon(True)
  t.start()
  
#populate queue with data   
  for host in hosts:
    queue.put(host)

#wait on the queue until everything has been processed     
queue.join()

main()
print "Elapsed Time: %s" % (time.time() - start)
	
	</pre>

</div>

	

	




	
	
	
	
	


	



	


</div></body></html>
