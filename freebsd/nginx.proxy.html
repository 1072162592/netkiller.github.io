<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6. Proxy</title><link rel="stylesheet" type="text/css" href="/docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><meta name="keywords" content="&#10;cat,chflags,chio,chmod,cp,csh,date,dd,df,domainname,echo,ed,expr,getfacl,hostname,kenv,kill,link,ln,ls,mkdir,mv,pax,pgrep,pkill,ps,pwait,pwd,rcp,realpath,red,rm,rmail,rmdir,setfacl,sh,sleep,stty,sync,tcsh,test,unlink,uuidgen,,/sbin/:,adjkerntz,atacontrol,atmconfig,badsect,bsdlabel,camcontrol,ccdconfig,clri,comcontrol,conscontrol,ddb,devd,devfs,dhclient,dhclient-script,disklabel,dmesg,dump,dumpfs,dumpon,fastboot,fasthalt,fdisk,ffsinfo,fsck,fsck_4.2bsd,fsck_ffs,fsck_msdosfs,fsck_ufs,fsdb,fsirand,gbde,gcache,gconcat,geli,geom,ggatec,ggated,ggatel,gjournal,glabel,gmirror,gmultipath,gnop,gpart,graid3,growfs,gsched,gshsec,gstripe,gvinum,gvirstor,halt,hastctl,hastd,ifconfig,init,ipf,ipfs,ipfstat,ipftest,ipfw,ipmon,ipnat,ippool,ipresend,iscontrol,kldconfig,kldload,kldstat,kldunload,ldconfig,md5,mdconfig,mdmfs,mknod,mksnap_ffs,mount,mount_cd9660,mount_mfs,mount_msdosfs,mount_newnfs,mount_nfs,mount_ntfs,mount_nullfs,mount_udf,mount_unionfs,natd,newfs,newfs_msdos,nextboot,nfsiod,nologin,nos-tun,pfctl,pflogd,ping,ping6,quotacheck,rcorder,rdump,reboot,recoverdisk,restore,rmd160,route,routed,rrestore,rtquery,rtsol,savecore,setkey,sha1,sha256,shutdown,spppcontrol,swapctl,swapoff,swapon,sysctl,tunefs,umount,zfs,zpool&#10;&#9;&#9;&#9;, &#10;addftinfo,addr2line,afmtodit,alias,apply,apropos,ar,as,asa,at,atq,atrm,awk,b64decode,b64encode,banner,basename,batch,bc,bdes,bg,biff,brandelf,bsdcpio,bsdiff,bsdtar,bspatch,bthost,btsockstat,bunzip2,byacc,bzcat,bzegrep,bzfgrep,bzgrep,bzip2,bzip2recover,bzless,c++,c++filt,c89,c99,cal,calendar,cap_mkdb,catman,cc,cd,chat,checknr,chfn,chgrp,chkey,chpass,chsh,ci,cksum,clear,cmp,co,col,colcrt,colldef,colrm,column,comm,command,compile_et,compress,cpio,cpp,cpuset,crontab,crunchgen,crunchide,crypt,csplit,csup,ctags,ctfconvert,ctfdump,ctfmerge,cu,cut,cvs,cvsbug,dc,dialog,diff,diff3,dig,dirname,du,edit,ee,egrep,elf2aout,elfdump,enigma,env,eqn,ex,expand,false,fc,fetch,fg,fgrep,file,file2c,find,finger,flex,flex++,fmt,fold,from,fstat,fsync,ftp,g++,gate-ftp,gcc,gcore,gcov,gdb,gdbtui,gencat,getconf,getent,getopt,getopts,gnu-ar,gnu-ranlib,gperf,gprof,grep,grn,grodvi,groff,grog,grolbp,grolj4,grops,grotty,groups,gunzip,gzcat,gzexe,gzip,hd,head,hexdump,host,hpftodit,id,ident,indent,indxbib,info,infokey,install,install-info,ipcrm,ipcs,jobs,join,jot,kadmin,kdestroy,kdump,keylogin,keylogout,kgdb,killall,kinit,klist,kpasswd,krb5-config,ksu,ktrace,ktrdump,lam,last,lastcomm,ld,ldd,leave,less,lessecho,lesskey,lesspipe.sh,lex,lex++,limits,lint,lkbib,locale,locate,lock,lockf,logger,login,logins,logname,look,lookbib,lorder,lp,lpq,lpr,lprm,lsvfs,lzcat,lzdec,lzless,lzma,lzmainfo,m4,mail,mailq,mailx,make,makeinfo,makewhatis,man,manpath,merge,mesg,minigzip,ministat,mkdep,mkfifo,mklocale,mkstr,mktemp,mkuzip,mmroff,more,msgs,mt,nawk,nc,ncal,ncplist,ncplogin,ncplogout,neqn,netstat,newaliases,newgrp,newkey,nex,nfsstat,nice,nl,nm,nohup,nroff,nslookup,nsupdate,ntpq,nvi,nview,objcopy,objdump,od,openssl,opieinfo,opiekey,opiepasswd,otp-md4,otp-md5,otp-sha,pagesize,passwd,paste,patch,pathchk,pawd,perl,perl5,perror,pfbtops,pftp,pgrep,pic,pkill,post-grohtml,pr,pre-grohtml,printenv,printf,procstat,psroff,quota,ranlib,rcs,rcsclean,rcsdiff,rcsfreeze,rcsmerge,read,readelf,readlink,ree,refer,renice,reset,rev,revoke,rfcomm_sppd,rlog,rlogin,rpcgen,rpcinfo,rs,rsh,rup,ruptime,rusers,rwall,rwho,scp,script,sdiff,sed,send-pr,sendbug,sftp,sgsmsg,shar,showmount,size,slogin,smbutil,sockstat,soelim,sort,split,sscop,ssh,ssh-add,ssh-agent,ssh-keygen,ssh-keyscan,stat,strings,strip,su,sum,systat,tabs,tail,talk,tar,tbl,tcopy,tee,telnet,texindex,tfmtodit,tftp,time,tip,top,touch,tput,tr,troff,true,truncate,truss,tset,tsort,tty,ul,umask,unalias,uname,uncompress,unexpand,unifdef,unifdefall,uniq,units,unlzma,unvis,unxz,uptime,usbhidaction,usbhidctl,users,uudecode,uuencode,vacation,verify_krb5_conf,vgrind,vi,view,vis,vmstat,w,wait,wall,wc,what,whatis,whereis,which,who,whoami,whois,write,xargs,xstr,xz,xzcat,xzdec,xzless,yacc,yes,ypcat,ypchfn,ypchpass,ypchsh,ypmatch,yppasswd,ypwhich,yyfix,zcat,zcmp,zdiff,zegrep,zfgrep,zforce,zgrep,zinject,zless,zmore,znew,ztest,,/usr/sbin/:,IPXrouted,ac,accton,acpiconf,acpidb,acpidump,adduser,amd,amq,ancontrol,arp,asf,audit,auditd,auditreduce,authpf,bcmfw,boot0cfg,bootparamd,bootpef,bootptest,bsnmpd,bt3cfw,bthidcontrol,bthidd,btpand,btxld,burncd,callbootd,cdcontrol,chkgrp,chkprintcap,chown,chroot,ckdist,clear_locks,config,cpucontrol,crashinfo,cron,ctm,ctm_dequeue,ctm_rmail,ctm_smail,daemon,dconschat,devinfo,digictl,diskinfo,dnssec-dsfromkey,dnssec-keyfromlabel,dnssec-keygen,dnssec-signzone,dtrace,dumpcis,editmap,edquota,extattrctl,faithd,fdcontrol,fdformat,fdread,fdwrite,fifolog_create,fifolog_reader,fifolog_writer,fixmount,flowctl,freebsd-update,fsinfo,ftp-proxy,fwcontrol,gensnmptree,getextattr,getfmac,getpmac,gssd,gstat,hccontrol,hcsecd,hcseriald,hlfsd,hostapd,hostapd_cli,hoststat,i2c,iasl,idprio,ifmcstat,inetd,iostat,ip6addrctl,ipfwpcap,jail,jexec,jls,kbdcontrol,kbdmap,keyserv,kgmon,kldxref,kstash,ktutil,l2control,l2ping,lastlogin,lmcconfig,lockstat,lpc,lpd,lptcontrol,lptest,lsextattr,lwresd,mailstats,mailwrapper,makefs,makemap,manctl,memcontrol,mergemaster,mfiutil,mixer,mk-amd-map,mld6query,mlxcontrol,mount_nwfs,mount_portalfs,mount_smbfs,mountd,moused,mptable,mptutil,mtest,mtree,named,named-checkconf,named-checkzone,named-compilezone,named.reconfig,named.reload,ndis_events,ndiscvt,ndisgen,ndp,newsyslog,nfscbd,nfsd,nfsdumpstate,nfsrevoke,nfsuserd,ngctl,nghook,nologin,nscd,ntp-keygen,ntpd,ntpdate,ntpdc,ntptime,ntptrace,pac,pciconf,periodic,pkg_add,pkg_create,pkg_delete,pkg_info,pkg_updating,pkg_version,pmcannotate,pmccontrol,pmcstat,portsnap,powerd,ppp,pppctl,praliases,praudit,procctl,pstat,purgestat,pw,pwd_mkdb,quot,quotaoff,quotaon,rarpd,repquota,rfcomm_pppd,rip6query,rmextattr,rmt,rmuser,rndc,rndc-confgen,route6d,rpc.lockd,rpc.statd,rpc.umntall,rpc.yppasswdd,rpc.ypupdated,rpc.ypxfrd,rpcbind,rrenumd,rtadvd,rtprio,rtsold,rwhod,sa,sade,sdpcontrol,sdpd,sendmail,service,services_mkdb,setextattr,setfib,setfmac,setfsmac,setpmac,sicontrol,smbmsg,snapinfo,sntp,spkrtest,spray,sshd,swapinfo,sysinstall,syslogd,tcpdchk,tcpdmatch,tcpdrop,tcpdump,timed,timedc,traceroute,traceroute6,trpt,tzsetup,uathload,ugidfw,uhsoctl,usbconfig,vidcontrol,vidfont,vipw,wake,watch,watchdog,watchdogd,wire-test,wlandebug,wpa_cli,wpa_passphrase,wpa_supplicant,yp_mkdb,ypbind,ypinit,yppoll,yppush,ypserv,ypset,zdb,zdump,zic,zzz&#10;&#9;&#9;&#9;, &#10;a2p,autoconf,autoconf-2.62,autoconf-wrapper,autoheader,autoheader-2.62,autom4te,autom4te-2.62,autopoint,autoreconf,autoreconf-2.62,autoscan,autoscan-2.62,autoupdate-2.62,autoupdates,c2ph,cjpeg,config_data,corelist,cpan,cpan2dist,cpanp,cpanp-run-perl,curl,curl-config,cxpm,djpeg,dprofpp,enc2xs,encode_keychange,envsubst,eview,evim,exifautotran,find2perl,fixproc,freetype-config,gettext,gettext.sh,gettextize,gm4,gmake,gview,gvim,gvimdiff,gvimtutor,h2ph,h2xs,help2man,iconv,idle3,idle3-3.1,ifnames,ifnames-2.62,instmodsh,ipf-mod.pl,jpegexiforient,jpegtran,libmcrypt-config,libnetcfg,libpng-config,libpng14-config,libtool,libtoolize,makestrs,mib2c,mib2c-update,msgattrib,msgcat,msgcmp,msgcomm,msgconv,msgen,msgexec,msgfilter,msgfmt,msggrep,msginit,msgmerge,msgunfmt,msguniq,mysql,mysql_config,mysql_fix_privilege_tables,mysql_upgrade,mysqladmin,mysqlbinlog,mysqlbug,mysqlcheck,mysqldump,mysqlimport,mysqlshow,mysqlslap,mysqltest,net-snmp-config,net-snmp-create-v3-user,ngettext,onig-config,pcre-config,pcregrep,pcretest,perl,perl-after-upgrade,perl5,perl5.10.1,perlbug,perldoc,perlivp,perlthanks,php,php-cgi,php-config,phpize,piconv,pkg-config,pl2pm,pod2html,pod2latex,pod2man,pod2text,pod2usage,podchecker,podselect,prove,psed,pstruct,ptar,ptardiff,pydoc3,pydoc3-3.1,python,python-config,python-shared,python-shared-config,python-shared3.1,python-shared3.1-config,python3.1,python3.1-config,rdjpgcom,recode-sr-latin,rgview,rgvim,rpc,rsync,rview,rvim,rzsh,s2p,shasum,snmpbulkget,snmpbulkwalk,snmpcheck,snmpconf,snmpdelta,snmpdf,snmpget,snmpgetnext,snmpinform,snmpnetstat,snmpset,snmpstatus,snmptable,snmptest,snmptranslate,snmptrap,snmpusm,snmpvacm,snmpwalk,spawn-fcgi,splain,sqlite3,sxpm,tclsh8.5,traptoemail,type1afm,vim,vimdiff,vimtutor,wrjpgcom,xgettext,xglyph,xml2-config,xmlcatalog,xmllint,xsubpp,xxd,zsh,zsh-4.3.10,,/usr/local/sbin:,cronolog,cronosplit,lighttpd,lighttpd-angel,lsof,snmpd,snmptrapd&#10;&#9;&#9;&#9;" /><link rel="home" href="index.html" title="Netkiller FreeBSD 手札" /><link rel="up" href="nginx.html" title="第 13 章 nginx" /><link rel="prev" href="nginx.http.html" title="5. http 配置" /><link rel="next" href="httpd.html" title="第 14 章 Apache" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Proxy</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="nginx.http.html">上一页</a> </td><th width="60%" align="center">第 13 章 nginx</th><td width="20%" align="right"> <a accesskey="n" href="httpd.html">下一页</a></td></tr></table><hr /></div><table xmlns="" width="100%" border="0"><tr><td align="left"><a href="http://netkiller.github.io/">Home</a> |
                <a href="http://netkiller.sourceforge.net/">Mirror</a> |
                <a href="/search.html">Search</a></td><td><div id="bdshare" class="bdshare_t bds_tools_32 get-codes-bdshare"><a class="bds_fbook"></a><a class="bds_twi"></a><a class="bds_ms"></a><a class="bds_msn"></a><a class="bds_buzz"></a><a class="bds_linkedin"></a><a class="bds_deli"></a><a class="bds_qzone"></a><a class="bds_qq"></a><a class="bds_tqq"></a><a class="bds_tqf"></a><a class="bds_tsina"></a><a class="bds_baidu"></a><a class="bds_renren"></a><a class="bds_t163"></a><a class="bds_tfh"></a><a class="bds_ty"></a><a class="bds_s51"></a><a class="bds_douban"></a><a class="bds_hi"></a><a class="bds_tieba"></a><a class="bds_tsohu"></a><a class="bds_kaixin001"></a><a class="bds_zx"></a><a class="bds_tuita"></a><span class="bds_more"></span><a class="shareCount"></a></div><script type="text/javascript" id="bdshare_js" data="type=tools"></script><script type="text/javascript" id="bdshell_js"></script><script type="text/javascript">
	document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
</script></td><td></td></tr></table><div class="section" title="6. Proxy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="nginx.proxy"></a>6. Proxy</h2></div></div></div>
		
		<pre class="screen">
# cat /etc/nginx/nginx.conf

#user  nobody;
worker_processes  4;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  40960;
        use epoll;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    access_log  /dev/null;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

upstream backend{
#        server 172.16.0.6:80;
        server 10.0.0.68:80;
        server 10.0.0.69:80;
}


    server {
        listen       80;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

#        location / {
#            root   html;
#            index  index.html index.htm;
#        }

    access_log  /dev/null;
    error_log   /dev/null;


    location / {
#        proxy_pass $scheme://$host$request_uri;
#        proxy_set_header Host $http_host;

#        proxy_buffers 256 4k;
#        proxy_max_temp_file_size 0;

#        proxy_connect_timeout 30;

#        proxy_cache_valid 200 302 10m;
#        proxy_cache_valid 301 1h;
#        proxy_cache_valid any 1m;



         proxy_pass      http://backend;

         proxy_redirect          off;
         proxy_set_header        Host $host;
#         proxy_set_header        X-Real-IP $remote_addr;
#         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
         client_max_body_size    10m;
         client_body_buffer_size 128k;
         proxy_connect_timeout   30;
         proxy_send_timeout      30;
         proxy_read_timeout      30;
         proxy_buffer_size       4k;
         proxy_buffers           256 4k;
         proxy_busy_buffers_size 64k;
         proxy_temp_file_write_size 64k;
        tcp_nodelay on;
    }


        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }

}
		</pre>
		<div class="section" title="6.1. request_filename + proxy_pass"><div class="titlepage"><div><div><h3 class="title"><a id="idp549824"></a>6.1. request_filename + proxy_pass</h3></div></div></div>
			
			<p>如果文件不存在，那么去指定的节点上寻找</p>
			<pre class="screen">
   location / {
        root  /www;
        proxy_intercept_errors  on;
        if (!-f $request_filename) {
          proxy_pass http://172.16.1.1;
          break;
        }
    }
	location / {
        root  /www/images;
        proxy_intercept_errors  on;
        if (!-f $request_filename) {
          proxy_pass http://172.16.1.2;
          break;
        }
    }
			</pre>
		</div>
		<div class="section" title="6.2. proxy_cache"><div class="titlepage"><div><div><h3 class="title"><a id="proxy_cache"></a>6.2. proxy_cache</h3></div></div></div>
			
			<pre class="screen">
http {
  proxy_cache_path  /var/www/cache levels=1:2 keys_zone=my-cache:8m max_size=1000m inactive=600m;
  proxy_temp_path /var/www/cache/tmp;


  server {
    location / {
      proxy_pass http://example.net;
      proxy_cache mycache;
      proxy_cache_valid  200 302  60m;
      proxy_cache_valid  404      1m;
    }
  }
}
			</pre>
			<pre class="screen">
location / {
  proxy_pass http://localhost;
  proxy_set_header   Host             $host;
  proxy_set_header   X-Real-IP        $remote_addr;
  proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
  proxy_ignore_headers Set-Cookie;
  proxy_ignore_headers Cache-Control;
  proxy_cache_bypass        $http_secret_header;
  add_header X-Cache-Status $upstream_cache_status;
}
			</pre>
			<pre class="screen">
server {
          listen       80;
          server_name  example.org;
          root   /var/www;
          index  index.html index.php;

	location ~* .+.(ico|jpg|gif|jpeg|css|js|flv|png|swf)$ {
           	expires max;
	}

	location / {
		proxy_pass       http://backend;
		proxy_set_header  X-Real-IP  $remote_addr;
		proxy_set_header Host $http_host;
		proxy_cache cache;
		proxy_cache_key $host$request_uri;
		proxy_cache_valid 200 304 12h;
		proxy_cache_valid 302 301 12h;
		proxy_cache_valid any 1m;
		proxy_ignore_headers Cache-Control Expires;
		proxy_pass_header Set-Cookie;
	}

}
			</pre>
		</div>

		<div class="section" title="6.3. expires"><div class="titlepage"><div><div><h3 class="title"><a id="idp555952"></a>6.3. expires</h3></div></div></div>
			
			<pre class="screen">
location / {
    root /var/www;
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect false;

    if ($request_uri ~* "\.(ico|css|js|gif|jpe?g|png)\?[0-9]+$") {
        expires max;
        break;
    }
    if (-f $request_filename) {
        break;
    }
    if (-f $request_filename/index.html) {
        rewrite (.*) $1/index.html break;
    }
    if (-f $request_filename.html) {
        rewrite (.*) $1.html break;
    }

    proxy_pass http://backend;
}
			</pre>
		</div>
		<div class="section" title="6.4. $request_uri 与 proxy_pass 联合使用"><div class="titlepage"><div><div><h3 class="title"><a id="request_uri+proxy_pass"></a>6.4. $request_uri 与  proxy_pass 联合使用</h3></div></div></div>
			
			<pre class="screen">
server {
    listen       80;
    server_name  info.example.com;

    #charset koi8-r;
    access_log  /var/log/nginx/info.example.com.access.log  main;

    location / {
        root   /www/example.com/info.example.com;
        index  index.html index.htm;

	rewrite ^/$  http://www.example.com/;

	valid_referers none blocked *.example.com;
	if ($invalid_referer) {
		#rewrite ^(.*)$  http://www.example.com/cn/$1;
		return 403;
	}

        proxy_intercept_errors  on;
#	    proxy_set_header  X-Real-IP  $remote_addr;
#            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
#            proxy_set_header  Host            $host;
#
#            proxy_cache one;
#            proxy_cache_valid  200 302 304 10m;
#            proxy_cache_valid  301 1h;
#            proxy_cache_valid  any 1m;

        if ( $request_uri ~ "^/public/datas/(sge|cgse|futures|fx_price|gold_price|stock|bonds)\.xml$") {
                proxy_pass http://211.176.212.212$request_uri;
		break;
        }

        if (!-f $request_filename) {

          proxy_pass http://infoadmin.example.com;
          #proxy_pass http://backend;
          break;
        }
    }

    location ~ ^/index\.php$ {
	return 403;
    }
    location ~ ^/(config|include|crontab|/systemmanage)/ {
	deny all;
	break;
    }
    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

}
			</pre>
		</div>
		<div class="section" title="6.5. X-Sendfile"><div class="titlepage"><div><div><h3 class="title"><a id="xsendfile"></a>6.5. X-Sendfile</h3></div></div></div>
			
			<p>http://wiki.nginx.org/NginxXSendfile</p>
			<pre class="screen">

			</pre>
		</div>

		<div class="section" title="6.6. FAQ"><div class="titlepage"><div><div><h3 class="title"><a id="idp563120"></a>6.6. FAQ</h3></div></div></div>
			
			<pre class="screen">
nginx: [emerg] "proxy_pass" cannot have URI part in location given by regular expression, or inside named location, or inside "if" statement, or inside "limit_except" block in /etc/nginx/conf.d/www.mydomain.com.conf:25
nginx: configuration file /etc/nginx/nginx.conf test failed
			</pre>
			<p>在location,if中使用证则匹配proxy_pass末尾不能写/</p>
			<pre class="screen">
	if ($request_uri ~* "^/info/{cn|tw}/{news|info}/\d\.html") {
		proxy_pass http://info.example.com/;
		break;
	}

    location ~ ^/info/ {
                proxy_pass http://info.example.com/;
                break;
    }
			</pre>
			<p>proxy_pass http://info.example.com/; 改为  proxy_pass http://info.example.com; 可以解决</p>
		</div>
	</div><div xmlns="" id="disqus_thread"></div><script xmlns="" type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */

            if(document.domain == 'netkiller.github.com'){
            var disqus_shortname = 'netkiller'; // required: replace example with your forum shortname
            }else{
			var disqus_shortname = 'neochan';
            }

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script><noscript xmlns="">Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a xmlns="" href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="nginx.http.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="nginx.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="httpd.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">5. http 配置 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 14 章 Apache</td></tr></table></div><script xmlns="" type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11694057-1']);
  _gaq.push(['_setDomainName', 'netkiller.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script xmlns="" type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F4e2c9e3efb5080a9a4ccbf63573ae106' type='text/javascript'%3E%3C/script%3E"));
</script></body></html>
